jQuery.extend({createUploadIframe:function(e,t){var a="jUploadFrame"+e,r='<iframe id="'+a+'" name="'+a+'" style="position:absolute; top:-9999px; left:-9999px"';return window.ActiveXObject&&("boolean"==typeof t?r+=' src="javascript:false"':"string"==typeof t&&(r+=' src="'+t+'"')),r+=" />",jQuery(r).appendTo(document.body),jQuery("#"+a).get(0)},createUploadForm:function(e,t,a){var r="jUploadForm"+e,i="jUploadFile"+e,n=jQuery('<form  action="" method="POST" name="'+r+'" id="'+r+'" enctype="multipart/form-data"></form>');if(a)for(var o in a)jQuery('<input type="hidden" name="'+o+'" value="'+a[o]+'" />').appendTo(n);var s=jQuery("#"+t),l=jQuery(s).clone();return jQuery(s).attr("id",i),jQuery(s).before(l),jQuery(s).appendTo(n),jQuery(n).css("position","absolute"),jQuery(n).css("top","-1200px"),jQuery(n).css("left","-1200px"),jQuery(n).appendTo("body"),n},handleError:function(e,t,a,r){e.error&&e.error.call(e.context||e,t,a,r),e.global&&(e.context?jQuery(e.context):jQuery.event).trigger("ajaxError",[t,e,r])},ajaxFileUpload:function(e){e=jQuery.extend({},jQuery.ajaxSettings,e);var t=(new Date).getTime(),a=jQuery.createUploadForm(t,e.fileElementId,"undefined"!=typeof e.data&&e.data),r=(jQuery.createUploadIframe(t,e.secureuri),"jUploadFrame"+t),i="jUploadForm"+t;e.global&&!jQuery.active++&&jQuery.event.trigger("ajaxStart");var n=!1,o={};e.global&&jQuery.event.trigger("ajaxSend",[o,e]);var s=function(t){var i=document.getElementById(r);try{i.contentWindow?(o.responseText=i.contentWindow.document.body?i.contentWindow.document.body.innerHTML:null,o.responseXML=i.contentWindow.document.XMLDocument?i.contentWindow.document.XMLDocument:i.contentWindow.document):i.contentDocument&&(o.responseText=i.contentDocument.document.body?i.contentDocument.document.body.innerHTML:null,o.responseXML=i.contentDocument.document.XMLDocument?i.contentDocument.document.XMLDocument:i.contentDocument.document)}catch(t){jQuery.handleError(e,o,null,t)}if(o||"timeout"==t){n=!0;var s;try{if(s="timeout"!=t?"success":"error","error"!=s){var l=jQuery.uploadHttpData(o,e.dataType);e.success&&e.success(l,s),e.global&&jQuery.event.trigger("ajaxSuccess",[o,e])}else jQuery.handleError(e,o,s)}catch(t){s="error",jQuery.handleError(e,o,s,t)}e.global&&jQuery.event.trigger("ajaxComplete",[o,e]),e.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop"),e.complete&&e.complete(o,s),jQuery(i).unbind(),setTimeout(function(){try{jQuery(i).remove(),jQuery(a).remove()}catch(t){jQuery.handleError(e,o,null,t)}},100),o=null}};e.timeout>0&&setTimeout(function(){n||s("timeout")},e.timeout);try{var a=jQuery("#"+i);jQuery(a).attr("action",e.url),jQuery(a).attr("method","POST"),jQuery(a).attr("target",r),a.encoding?jQuery(a).attr("encoding","multipart/form-data"):jQuery(a).attr("enctype","multipart/form-data"),jQuery(a).submit()}catch(t){jQuery.handleError(e,o,null,t)}return jQuery("#"+r).load(s),{abort:function(){}}},uploadHttpData:function(r,type){var data=!type;if(data="xml"==type||data?r.responseXML:r.responseText,data=data.replace("<pre>",""),data=data.replace("</pre>",""),"script"==type&&jQuery.globalEval(data),"json"==type){data=r.responseText;var start=data.indexOf(">");if(start!=-1){var end=data.indexOf("<",start+1);end!=-1&&(data=data.substring(start+1,end))}eval("data = "+data)}return"html"==type&&jQuery("<div>").html(data).evalScripts(),data}}),function(e){"use strict";var t,a=e.Base64,r="2.1.9";if("undefined"!=typeof module&&module.exports)try{t=require("buffer").Buffer}catch(e){}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=function(e){for(var t={},a=0,r=e.length;a<r;a++)t[e.charAt(a)]=a;return t}(i),o=String.fromCharCode,s=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?o(192|t>>>6)+o(128|63&t):o(224|t>>>12&15)+o(128|t>>>6&63)+o(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return o(240|t>>>18&7)+o(128|t>>>12&63)+o(128|t>>>6&63)+o(128|63&t)},l=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,p=function(e){return e.replace(l,s)},c=function(e){var t=[0,2,1][e.length%3],a=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),r=[i.charAt(a>>>18),i.charAt(a>>>12&63),t>=2?"=":i.charAt(a>>>6&63),t>=1?"=":i.charAt(63&a)];return r.join("")},d=e.btoa?function(t){return e.btoa(t)}:function(e){return e.replace(/[\s\S]{1,3}/g,c)},u=t?function(e){return(e.constructor===t.constructor?e:new t(e)).toString("base64")}:function(e){return d(p(e))},h=function(e,t){return t?u(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):u(String(e))},f=function(e){return h(e,!0)},m=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),g=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),a=t-65536;return o((a>>>10)+55296)+o((1023&a)+56320);case 3:return o((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return o((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},v=function(e){return e.replace(m,g)},y=function(e){var t=e.length,a=t%4,r=(t>0?n[e.charAt(0)]<<18:0)|(t>1?n[e.charAt(1)]<<12:0)|(t>2?n[e.charAt(2)]<<6:0)|(t>3?n[e.charAt(3)]:0),i=[o(r>>>16),o(r>>>8&255),o(255&r)];return i.length-=[0,0,2,1][a],i.join("")},b=e.atob?function(t){return e.atob(t)}:function(e){return e.replace(/[\s\S]{1,4}/g,y)},x=t?function(e){return(e.constructor===t.constructor?e:new t(e,"base64")).toString()}:function(e){return v(b(e))},w=function(e){return x(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},_=function(){var t=e.Base64;return e.Base64=a,t};if(e.Base64={VERSION:r,atob:b,btoa:d,fromBase64:w,toBase64:h,utob:p,encode:h,encodeURI:f,btou:v,decode:w,noConflict:_},"function"==typeof Object.defineProperty){var z=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};e.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",z(function(){return w(this)})),Object.defineProperty(String.prototype,"toBase64",z(function(e){return h(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",z(function(){return h(this,!0)}))}}e.Meteor&&(Base64=e.Base64)}(this),function(){function e(e,t,a,r){var i,n,l,p,c,u,f=e.length,m="";if(null!=t&&""!=t&&(i=o(t),p=i.length),null!=a&&""!=a&&(n=o(a),c=n.length),null!=r&&""!=r&&(l=o(r),u=l.length),f>0)if(f<4){var g,v=s(e);if(null!=t&&""!=t&&null!=a&&""!=a&&null!=r&&""!=r){var y,b,x,w;for(y=v,b=0;b<p;b++)y=h(y,i[b]);for(x=0;x<c;x++)y=h(y,n[x]);for(w=0;w<u;w++)y=h(y,l[w]);g=y}else if(null!=t&&""!=t&&null!=a&&""!=a){var y,b,x;for(y=v,b=0;b<p;b++)y=h(y,i[b]);for(x=0;x<c;x++)y=h(y,n[x]);g=y}else if(null!=t&&""!=t){var y,b=0;for(y=v,b=0;b<p;b++)y=h(y,i[b]);g=y}m=d(g)}else{var _=parseInt(f/4),z=f%4,k=0;for(k=0;k<_;k++){var g,C=e.substring(4*k+0,4*k+4),D=s(C);if(null!=t&&""!=t&&null!=a&&""!=a&&null!=r&&""!=r){var y,b,x,w;for(y=D,b=0;b<p;b++)y=h(y,i[b]);for(x=0;x<c;x++)y=h(y,n[x]);for(w=0;w<u;w++)y=h(y,l[w]);g=y}else if(null!=t&&""!=t&&null!=a&&""!=a){var y,b,x;for(y=D,b=0;b<p;b++)y=h(y,i[b]);for(x=0;x<c;x++)y=h(y,n[x]);g=y}else if(null!=t&&""!=t){var y,b;for(y=D,b=0;b<p;b++)y=h(y,i[b]);g=y}m+=d(g)}if(z>0){var g,S=e.substring(4*_+0,f),D=s(S);if(null!=t&&""!=t&&null!=a&&""!=a&&null!=r&&""!=r){var y,b,x,w;for(y=D,b=0;b<p;b++)y=h(y,i[b]);for(x=0;x<c;x++)y=h(y,n[x]);for(w=0;w<u;w++)y=h(y,l[w]);g=y}else if(null!=t&&""!=t&&null!=a&&""!=a){var y,b,x;for(y=D,b=0;b<p;b++)y=h(y,i[b]);for(x=0;x<c;x++)y=h(y,n[x]);g=y}else if(null!=t&&""!=t){var y,b;for(y=D,b=0;b<p;b++)y=h(y,i[b]);g=y}m+=d(g)}}return m}function t(e,t,a,r){var i,n,s,l,p,d,h=e.length,m="";null!=t&&""!=t&&(i=o(t),l=i.length),null!=a&&""!=a&&(n=o(a),p=n.length),null!=r&&""!=r&&(s=o(r),d=s.length);var g=parseInt(h/16),v=0;for(v=0;v<g;v++){var y=e.substring(16*v+0,16*v+16),b=u(y),x=new Array(64),w=0;for(w=0;w<64;w++)x[w]=parseInt(b.substring(w,w+1));var _;if(null!=t&&""!=t&&null!=a&&""!=a&&null!=r&&""!=r){var z,k,C,D;for(z=x,k=d-1;k>=0;k--)z=f(z,s[k]);for(C=p-1;C>=0;C--)z=f(z,n[C]);for(D=l-1;D>=0;D--)z=f(z,i[D]);_=z}else if(null!=t&&""!=t&&null!=a&&""!=a){var z,k,C,D;for(z=x,k=p-1;k>=0;k--)z=f(z,n[k]);for(C=l-1;C>=0;C--)z=f(z,i[C]);_=z}else if(null!=t&&""!=t){var z,k,C,D;for(z=x,k=l-1;k>=0;k--)z=f(z,i[k]);_=z}m+=c(_)}return m}function a(t){return e(t,"1","2","3")}function r(e){return t(e,"1","2","3")}function o(e){var t=new Array,a=e.length,r=parseInt(a/4),i=a%4,n=0;for(n=0;n<r;n++)t[n]=s(e.substring(4*n+0,4*n+4));return i>0&&(t[n]=s(e.substring(4*n+0,a))),t}function s(e){var t=e.length,a=new Array(64);if(t<4){var r=0,i=0,n=0,o=0;for(r=0;r<t;r++){var s=e.charCodeAt(r);for(i=0;i<16;i++){var l=1,p=0;for(p=15;p>i;p--)l*=2;a[16*r+i]=parseInt(s/l)%2}}for(n=t;n<4;n++){var s=0;for(o=0;o<16;o++){var l=1,p=0;for(p=15;p>o;p--)l*=2;a[16*n+o]=parseInt(s/l)%2}}}else for(r=0;r<4;r++){var s=e.charCodeAt(r);for(i=0;i<16;i++){var l=1;for(p=15;p>i;p--)l*=2;a[16*r+i]=parseInt(s/l)%2}}return a}function l(e){var t;switch(e){case"0000":t="0";break;case"0001":t="1";break;case"0010":t="2";break;case"0011":t="3";break;case"0100":t="4";break;case"0101":t="5";break;case"0110":t="6";break;case"0111":t="7";break;case"1000":t="8";break;case"1001":t="9";break;case"1010":t="A";break;case"1011":t="B";break;case"1100":t="C";break;case"1101":t="D";break;case"1110":t="E";break;case"1111":t="F"}return t}function p(e){var t;switch(e){case"0":t="0000";break;case"1":t="0001";break;case"2":t="0010";break;case"3":t="0011";break;case"4":t="0100";break;case"5":t="0101";break;case"6":t="0110";break;case"7":t="0111";break;case"8":t="1000";break;case"9":t="1001";break;case"A":t="1010";break;case"B":t="1011";break;case"C":t="1100";break;case"D":t="1101";break;case"E":t="1110";break;case"F":t="1111"}return t}function c(e){var t="";for(i=0;i<4;i++){var a=0;for(j=0;j<16;j++){var r=1;for(m=15;m>j;m--)r*=2;a+=e[16*i+j]*r}0!=a&&(t+=String.fromCharCode(a))}return t}function d(e){var t="";for(i=0;i<16;i++){var a="";for(j=0;j<4;j++)a+=e[4*i+j];t+=l(a)}return t}function u(e){var t="";for(i=0;i<16;i++)t+=p(e.substring(i,i+1));return t}function h(e,t){var a=z(t),r=g(e),i=new Array(32),n=new Array(32),o=new Array(32),s=0,l=0,p=0,c=0,d=0;for(p=0;p<32;p++)i[p]=r[p],n[p]=r[32+p];for(s=0;s<16;s++){for(l=0;l<32;l++)o[l]=i[l],i[l]=n[l];var u=new Array(48);for(c=0;c<48;c++)u[c]=a[s][c];var h=y(x(b(y(v(n),u))),o);for(d=0;d<32;d++)n[d]=h[d]}var f=new Array(64);for(s=0;s<32;s++)f[s]=n[s],f[32+s]=i[s];return w(f)}function f(e,t){var a=z(t),r=g(e),i=new Array(32),n=new Array(32),o=new Array(32),s=0,l=0,p=0,c=0,d=0;for(p=0;p<32;p++)i[p]=r[p],n[p]=r[32+p];for(s=15;s>=0;s--){for(l=0;l<32;l++)o[l]=i[l],i[l]=n[l];var u=new Array(48);for(c=0;c<48;c++)u[c]=a[s][c];var h=y(x(b(y(v(n),u))),o);for(d=0;d<32;d++)n[d]=h[d]}var f=new Array(64);for(s=0;s<32;s++)f[s]=n[s],f[32+s]=i[s];return w(f)}function g(e){var t=new Array(64);for(i=0,m=1,n=0;i<4;i++,m+=2,n+=2)for(j=7,k=0;j>=0;j--,k++)t[8*i+k]=e[8*j+m],t[8*i+k+32]=e[8*j+n];return t}function v(e){var t=new Array(48);for(i=0;i<8;i++)0==i?t[6*i+0]=e[31]:t[6*i+0]=e[4*i-1],t[6*i+1]=e[4*i+0],t[6*i+2]=e[4*i+1],t[6*i+3]=e[4*i+2],t[6*i+4]=e[4*i+3],7==i?t[6*i+5]=e[0]:t[6*i+5]=e[4*i+4];return t}function y(e,t){var a=new Array(e.length);for(i=0;i<e.length;i++)a[i]=e[i]^t[i];return a}function b(e){var t=new Array(32),a="",r=[[14,4,13,1,2,15,11,8,3,10,6,12,5,9,0,7],[0,15,7,4,14,2,13,1,10,6,12,11,9,5,3,8],[4,1,14,8,13,6,2,11,15,12,9,7,3,10,5,0],[15,12,8,2,4,9,1,7,5,11,3,14,10,0,6,13]],i=[[15,1,8,14,6,11,3,4,9,7,2,13,12,0,5,10],[3,13,4,7,15,2,8,14,12,0,1,10,6,9,11,5],[0,14,7,11,10,4,13,1,5,8,12,6,9,3,2,15],[13,8,10,1,3,15,4,2,11,6,7,12,0,5,14,9]],n=[[10,0,9,14,6,3,15,5,1,13,12,7,11,4,2,8],[13,7,0,9,3,4,6,10,2,8,5,14,12,11,15,1],[13,6,4,9,8,15,3,0,11,1,2,12,5,10,14,7],[1,10,13,0,6,9,8,7,4,15,14,3,11,5,2,12]],o=[[7,13,14,3,0,6,9,10,1,2,8,5,11,12,4,15],[13,8,11,5,6,15,0,3,4,7,2,12,1,10,14,9],[10,6,9,0,12,11,7,13,15,1,3,14,5,2,8,4],[3,15,0,6,10,1,13,8,9,4,5,11,12,7,2,14]],s=[[2,12,4,1,7,10,11,6,8,5,3,15,13,0,14,9],[14,11,2,12,4,7,13,1,5,0,15,10,3,9,8,6],[4,2,1,11,10,13,7,8,15,9,12,5,6,3,0,14],[11,8,12,7,1,14,2,13,6,15,0,9,10,4,5,3]],l=[[12,1,10,15,9,2,6,8,0,13,3,4,14,7,5,11],[10,15,4,2,7,12,9,5,6,1,13,14,0,11,3,8],[9,14,15,5,2,8,12,3,7,0,4,10,1,13,11,6],[4,3,2,12,9,5,15,10,11,14,1,7,6,0,8,13]],p=[[4,11,2,14,15,0,8,13,3,12,9,7,5,10,6,1],[13,0,11,7,4,9,1,10,14,3,5,12,2,15,8,6],[1,4,11,13,12,3,7,14,10,15,6,8,0,5,9,2],[6,11,13,8,1,4,10,7,9,5,0,15,14,2,3,12]],c=[[13,2,8,4,6,15,11,1,10,9,3,14,5,0,12,7],[1,15,13,8,10,3,7,4,12,5,6,11,0,14,9,2],[7,11,4,1,9,12,14,2,0,6,10,13,15,3,5,8],[2,1,14,7,4,10,8,13,15,12,9,0,3,5,6,11]];for(m=0;m<8;m++){var d=0,u=0;switch(d=2*e[6*m+0]+e[6*m+5],u=2*e[6*m+1]*2*2+2*e[6*m+2]*2+2*e[6*m+3]+e[6*m+4],m){case 0:a=_(r[d][u]);break;case 1:a=_(i[d][u]);break;case 2:a=_(n[d][u]);break;case 3:a=_(o[d][u]);break;case 4:a=_(s[d][u]);break;case 5:a=_(l[d][u]);break;case 6:a=_(p[d][u]);break;case 7:a=_(c[d][u])}t[4*m+0]=parseInt(a.substring(0,1)),t[4*m+1]=parseInt(a.substring(1,2)),t[4*m+2]=parseInt(a.substring(2,3)),t[4*m+3]=parseInt(a.substring(3,4))}return t}function x(e){var t=new Array(32);return t[0]=e[15],t[1]=e[6],t[2]=e[19],t[3]=e[20],t[4]=e[28],t[5]=e[11],t[6]=e[27],t[7]=e[16],t[8]=e[0],t[9]=e[14],t[10]=e[22],t[11]=e[25],t[12]=e[4],t[13]=e[17],t[14]=e[30],t[15]=e[9],t[16]=e[1],t[17]=e[7],t[18]=e[23],t[19]=e[13],t[20]=e[31],t[21]=e[26],t[22]=e[2],t[23]=e[8],t[24]=e[18],t[25]=e[12],t[26]=e[29],t[27]=e[5],t[28]=e[21],t[29]=e[10],t[30]=e[3],t[31]=e[24],t}function w(e){var t=new Array(64);return t[0]=e[39],t[1]=e[7],t[2]=e[47],t[3]=e[15],t[4]=e[55],t[5]=e[23],t[6]=e[63],t[7]=e[31],t[8]=e[38],t[9]=e[6],t[10]=e[46],t[11]=e[14],t[12]=e[54],t[13]=e[22],t[14]=e[62],t[15]=e[30],t[16]=e[37],t[17]=e[5],t[18]=e[45],t[19]=e[13],t[20]=e[53],t[21]=e[21],t[22]=e[61],t[23]=e[29],t[24]=e[36],t[25]=e[4],t[26]=e[44],t[27]=e[12],t[28]=e[52],t[29]=e[20],t[30]=e[60],t[31]=e[28],t[32]=e[35],t[33]=e[3],t[34]=e[43],t[35]=e[11],t[36]=e[51],t[37]=e[19],t[38]=e[59],t[39]=e[27],t[40]=e[34],t[41]=e[2],t[42]=e[42],t[43]=e[10],t[44]=e[50],t[45]=e[18],t[46]=e[58],t[47]=e[26],t[48]=e[33],t[49]=e[1],t[50]=e[41],t[51]=e[9],t[52]=e[49],t[53]=e[17],t[54]=e[57],t[55]=e[25],t[56]=e[32],t[57]=e[0],t[58]=e[40],t[59]=e[8],t[60]=e[48],t[61]=e[16],t[62]=e[56],t[63]=e[24],t}function _(e){var t="";switch(e){case 0:t="0000";break;case 1:t="0001";break;case 2:t="0010";break;case 3:t="0011";break;case 4:t="0100";break;case 5:t="0101";break;case 6:t="0110";break;case 7:t="0111";break;case 8:t="1000";break;case 9:t="1001";break;case 10:t="1010";break;case 11:t="1011";break;case 12:t="1100";break;case 13:t="1101";break;case 14:t="1110";break;case 15:t="1111"}return t}function z(e){var t=new Array(56),a=new Array;a[0]=new Array,a[1]=new Array,a[2]=new Array,a[3]=new Array,a[4]=new Array,a[5]=new Array,a[6]=new Array,a[7]=new Array,a[8]=new Array,a[9]=new Array,a[10]=new Array,a[11]=new Array,a[12]=new Array,a[13]=new Array,a[14]=new Array,a[15]=new Array;var r=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];for(i=0;i<7;i++)for(j=0,k=7;j<8;j++,k--)t[8*i+j]=e[8*k+i];var i=0;for(i=0;i<16;i++){var n=0,o=0;for(j=0;j<r[i];j++){for(n=t[0],o=t[28],k=0;k<27;k++)t[k]=t[k+1],t[28+k]=t[29+k];t[27]=n,t[55]=o}var s=new Array(48);switch(s[0]=t[13],s[1]=t[16],s[2]=t[10],s[3]=t[23],s[4]=t[0],s[5]=t[4],s[6]=t[2],s[7]=t[27],s[8]=t[14],s[9]=t[5],s[10]=t[20],s[11]=t[9],s[12]=t[22],s[13]=t[18],s[14]=t[11],s[15]=t[3],s[16]=t[25],s[17]=t[7],s[18]=t[15],s[19]=t[6],s[20]=t[26],s[21]=t[19],s[22]=t[12],s[23]=t[1],s[24]=t[40],s[25]=t[51],s[26]=t[30],s[27]=t[36],s[28]=t[46],s[29]=t[54],s[30]=t[29],s[31]=t[39],s[32]=t[50],s[33]=t[44],s[34]=t[32],s[35]=t[47],s[36]=t[43],s[37]=t[48],s[38]=t[38],s[39]=t[55],s[40]=t[33],s[41]=t[52],s[42]=t[45],s[43]=t[41],s[44]=t[49],s[45]=t[35],s[46]=t[28],s[47]=t[31],i){case 0:for(m=0;m<48;m++)a[0][m]=s[m];break;case 1:for(m=0;m<48;m++)a[1][m]=s[m];break;case 2:for(m=0;m<48;m++)a[2][m]=s[m];break;case 3:for(m=0;m<48;m++)a[3][m]=s[m];break;case 4:for(m=0;m<48;m++)a[4][m]=s[m];break;case 5:for(m=0;m<48;m++)a[5][m]=s[m];break;case 6:for(m=0;m<48;m++)a[6][m]=s[m];break;case 7:for(m=0;m<48;m++)a[7][m]=s[m];break;case 8:for(m=0;m<48;m++)a[8][m]=s[m];break;case 9:for(m=0;m<48;m++)a[9][m]=s[m];break;case 10:for(m=0;m<48;m++)a[10][m]=s[m];break;case 11:for(m=0;m<48;m++)a[11][m]=s[m];break;case 12:for(m=0;m<48;m++)a[12][m]=s[m];break;case 13:for(m=0;m<48;m++)a[13][m]=s[m];break;case 14:for(m=0;m<48;m++)a[14][m]=s[m];break;case 15:for(m=0;m<48;m++)a[15][m]=s[m]}}return a}var C={strEncSimple:a,strDecSimple:r,strEnc:e,strDec:t};window.DES=C}(),function(e,t){"object"==typeof exports?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e)}(this,function(e){function t(e){this._targetElement=e,this._introItems=[],this._options={nextLabel:"下一步 &rarr;",prevLabel:"&larr; 上一步",skipLabel:"忽略",doneLabel:"完成",hidePrev:!1,hideNext:!1,tooltipPosition:"bottom",tooltipClass:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!0,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,overlayOpacity:.8,scrollPadding:30,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1,hintPosition:"top-middle",hintButtonLabel:"Got it",hintAnimation:!0}}function a(e){var t=[],a=this;if(this._options.steps)for(var i=0,l=this._options.steps.length;i<l;i++){var p=r(this._options.steps[i]);if(p.step=t.length+1,"string"==typeof p.element&&(p.element=document.querySelector(p.element)),"undefined"==typeof p.element||null==p.element){var c=document.querySelector(".introjsFloatingElement");null==c&&(c=document.createElement("div"),c.className="introjsFloatingElement",document.body.appendChild(c)),p.element=c,p.position="floating"}null!=p.element&&t.push(p)}else{var d=e.querySelectorAll("*[data-intro]");if(d.length<1)return!1;for(var i=0,u=d.length;i<u;i++){var f=d[i];if("none"!=f.style.display){var m=parseInt(f.getAttribute("data-step"),10);m>0&&(t[m-1]={element:f,intro:f.getAttribute("data-intro"),step:parseInt(f.getAttribute("data-step"),10),tooltipClass:f.getAttribute("data-tooltipClass"),highlightClass:f.getAttribute("data-highlightClass"),position:f.getAttribute("data-position")||this._options.tooltipPosition})}}for(var g=0,i=0,u=d.length;i<u;i++){var f=d[i];if(null==f.getAttribute("data-step")){for(;;){if("undefined"==typeof t[g])break;g++}t[g]={element:f,intro:f.getAttribute("data-intro"),step:g+1,tooltipClass:f.getAttribute("data-tooltipClass"),highlightClass:f.getAttribute("data-highlightClass"),position:f.getAttribute("data-position")||this._options.tooltipPosition}}}}for(var v=[],y=0;y<t.length;y++)t[y]&&v.push(t[y]);if(t=v,t.sort(function(e,t){return e.step-t.step}),a._introItems=t,w.call(a,e)){n.call(a);e.querySelector(".introjs-skipbutton"),e.querySelector(".introjs-nextbutton");a._onKeyDown=function(t){if(27===t.keyCode&&1==a._options.exitOnEsc)void 0!=a._introExitCallback&&a._introExitCallback.call(a),s.call(a,e);else if(37===t.keyCode)o.call(a);else if(39===t.keyCode)n.call(a);else if(13===t.keyCode){var r=t.target||t.srcElement;r&&r.className.indexOf("introjs-prevbutton")>0?o.call(a):r&&r.className.indexOf("introjs-skipbutton")>0?(a._introItems.length-1==a._currentStep&&"function"==typeof a._introCompleteCallback&&a._introCompleteCallback.call(a),void 0!=a._introExitCallback&&a._introExitCallback.call(a),s.call(a,e)):n.call(a),t.preventDefault?t.preventDefault():t.returnValue=!1}},a._onResize=function(e){h.call(a,document.querySelector(".introjs-helperLayer")),h.call(a,document.querySelector(".introjs-tooltipReferenceLayer"))},window.addEventListener?(this._options.keyboardNavigation&&window.addEventListener("keydown",a._onKeyDown,!0),window.addEventListener("resize",a._onResize,!0)):document.attachEvent&&(this._options.keyboardNavigation&&document.attachEvent("onkeydown",a._onKeyDown),document.attachEvent("onresize",a._onResize))}return!1}function r(e){if(null==e||"object"!=typeof e||"undefined"!=typeof e.nodeType)return e;var t={};for(var a in e)"undefined"!=typeof jQuery&&e[a]instanceof jQuery?t[a]=e[a]:t[a]=r(e[a]);return t}function i(e){this._currentStep=e-2,"undefined"!=typeof this._introItems&&n.call(this)}function n(){if(this._direction="forward","undefined"==typeof this._currentStep?this._currentStep=0:++this._currentStep,this._introItems.length<=this._currentStep)return"function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this),void s.call(this,this._targetElement);var e=this._introItems[this._currentStep];"undefined"!=typeof this._introBeforeChangeCallback&&this._introBeforeChangeCallback.call(this,e.element),g.call(this,e)}function o(){if(this._direction="backward",0===this._currentStep)return!1;var e=this._introItems[--this._currentStep];"undefined"!=typeof this._introBeforeChangeCallback&&this._introBeforeChangeCallback.call(this,e.element),g.call(this,e)}function s(e){var t=e.querySelector(".introjs-overlay");if(null!=t){t.style.opacity=0,setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t)},500);var a=e.querySelector(".introjs-helperLayer");a&&a.parentNode.removeChild(a);var r=e.querySelector(".introjs-tooltipReferenceLayer");r&&r.parentNode.removeChild(r);var i=e.querySelector(".introjs-disableInteraction");i&&i.parentNode.removeChild(i);var n=document.querySelector(".introjsFloatingElement");n&&n.parentNode.removeChild(n);var o=document.querySelector(".introjs-showElement");o&&(o.className=o.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,""));var s=document.querySelectorAll(".introjs-fixParent");if(s&&s.length>0)for(var l=s.length-1;l>=0;l--)s[l].className=s[l].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");window.removeEventListener?window.removeEventListener("keydown",this._onKeyDown,!0):document.detachEvent&&document.detachEvent("onkeydown",this._onKeyDown),this._currentStep=void 0}}function l(e,t,a,r,i){var n,o,s,l,u,h="";if(i=i||!1,t.style.top=null,t.style.right=null,t.style.bottom=null,t.style.left=null,t.style.marginLeft=null,t.style.marginTop=null,a.style.display="inherit","undefined"!=typeof r&&null!=r&&(r.style.top=null,r.style.left=null),this._introItems[this._currentStep])switch(n=this._introItems[this._currentStep],h="string"==typeof n.tooltipClass?n.tooltipClass:this._options.tooltipClass,t.className=("introjs-tooltip "+h).replace(/^\s+|\s+$/g,""),u=this._introItems[this._currentStep].position,"auto"!=u&&"auto"!=this._options.tooltipPosition||"floating"!=u&&(u=d.call(this,e,t,u)),s=E(e),o=E(t),l=b(),u){case"top":if(a.className="introjs-arrow bottom",i)var f=0;else var f=15;p(s,f,o,l,t),t.style.bottom=s.height+20+"px";break;case"right":t.style.left=s.width+20+"px",s.top+o.height>l.height?(a.className="introjs-arrow left-bottom",t.style.top="-"+(o.height-s.height-20)+"px"):a.className="introjs-arrow left";break;case"left":i||1!=this._options.showStepNumbers||(t.style.top="15px"),s.top+o.height>l.height?(t.style.top="-"+(o.height-s.height-20)+"px",a.className="introjs-arrow right-bottom"):a.className="introjs-arrow right",t.style.right=s.width+20+"px";break;case"floating":a.style.display="none",t.style.left="50%",t.style.top="50%",t.style.marginLeft="-"+o.width/2+"px",t.style.marginTop="-"+o.height/2+"px","undefined"!=typeof r&&null!=r&&(r.style.left="-"+(o.width/2+18)+"px",r.style.top="-"+(o.height/2+18)+"px");break;case"bottom-right-aligned":a.className="introjs-arrow top-right";var m=0;c(s,m,o,t),t.style.top=s.height+20+"px";break;case"bottom-middle-aligned":a.className="introjs-arrow top-middle";var g=s.width/2-o.width/2;i&&(g+=5),c(s,g,o,t)&&(t.style.right=null,p(s,g,o,l,t)),t.style.top=s.height+20+"px";break;case"bottom-left-aligned":case"bottom":default:a.className="introjs-arrow top";var f=0;p(s,f,o,l,t),t.style.top=s.height+20+"px"}}function p(e,t,a,r,i){return e.left+t+a.width>r.width?(i.style.left=r.width-a.width-e.left+"px",!1):(i.style.left=t+"px",!0)}function c(e,t,a,r){return e.left+e.width-t-a.width<0?(r.style.left=-e.left+"px",!1):(r.style.right=t+"px",!0)}function d(e,t,a){var r=this._options.positionPrecedence.slice(),i=b(),n=E(t).height+10,o=E(t).width+20,s=E(e),l="floating";return s.left+o>i.width||s.left+s.width/2-o<0?(u(r,"bottom"),u(r,"top")):(s.height+s.top+n>i.height&&u(r,"bottom"),s.top-n<0&&u(r,"top")),s.width+s.left+o>i.width&&u(r,"right"),s.left-o<0&&u(r,"left"),r.length>0&&(l=r[0]),a&&"auto"!=a&&r.indexOf(a)>-1&&(l=a),l}function u(e,t){e.indexOf(t)>-1&&e.splice(e.indexOf(t),1)}function h(e){if(e){if(!this._introItems[this._currentStep])return;var t=this._introItems[this._currentStep],a=E(t.element),r=10;y(t.element)?e.className+=" introjs-fixedTooltip":e.className=e.className.replace(" introjs-fixedTooltip",""),"floating"==t.position&&(r=0),e.setAttribute("style","width: "+(a.width+r)+"px; height:"+(a.height+r)+"px; top:"+(a.top-5)+"px;left: "+(a.left-5)+"px;")}}function f(){var e=document.querySelector(".introjs-disableInteraction");null===e&&(e=document.createElement("div"),e.className="introjs-disableInteraction",this._targetElement.appendChild(e)),h.call(this,e)}function m(e){e.setAttribute("role","button"),e.tabIndex=0}function g(e){"undefined"!=typeof this._introChangeCallback&&this._introChangeCallback.call(this,e.element);var t=this,a=document.querySelector(".introjs-helperLayer"),r=document.querySelector(".introjs-tooltipReferenceLayer"),i="introjs-helperLayer";E(e.element);if("string"==typeof e.highlightClass&&(i+=" "+e.highlightClass),"string"==typeof this._options.highlightClass&&(i+=" "+this._options.highlightClass),null!=a){var p=r.querySelector(".introjs-helperNumberLayer"),c=r.querySelector(".introjs-tooltiptext"),d=r.querySelector(".introjs-arrow"),u=r.querySelector(".introjs-tooltip"),g=r.querySelector(".introjs-skipbutton"),y=r.querySelector(".introjs-prevbutton"),w=r.querySelector(".introjs-nextbutton");if(a.className=i,u.style.opacity=0,u.style.display="none",null!=p){var _=this._introItems[e.step-2>=0?e.step-2:0];(null!=_&&"forward"==this._direction&&"floating"==_.position||"backward"==this._direction&&"floating"==e.position)&&(p.style.opacity=0)}h.call(t,a),h.call(t,r);var z=document.querySelectorAll(".introjs-fixParent");if(z&&z.length>0)for(var k=z.length-1;k>=0;k--)z[k].className=z[k].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");var C=document.querySelector(".introjs-showElement");C&&(C.className=C.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,"")),t._lastShowElementTimer&&clearTimeout(t._lastShowElementTimer),t._lastShowElementTimer=setTimeout(function(){null!=p&&(p.innerHTML=e.step),c.innerHTML=e.intro,u.style.display="block",l.call(t,e.element,u,d,p),r.querySelector(".introjs-bullets li > a.active").className="",r.querySelector('.introjs-bullets li > a[data-stepnumber="'+e.step+'"]').className="active",r.querySelector(".introjs-progress .introjs-progressbar").setAttribute("style","width:"+I.call(t)+"%;"),u.style.opacity=1,p&&(p.style.opacity=1),w.tabIndex===-1?g.focus():w.focus()},350)}else{var D=document.createElement("div"),S=document.createElement("div"),j=document.createElement("div"),q=document.createElement("div"),T=document.createElement("div"),P=document.createElement("div"),A=document.createElement("div"),F=document.createElement("div");D.className=i,S.className="introjs-tooltipReferenceLayer",h.call(t,D),h.call(t,S),this._targetElement.appendChild(D),this._targetElement.appendChild(S),j.className="introjs-arrow",T.className="introjs-tooltiptext",T.innerHTML=e.intro,P.className="introjs-bullets",this._options.showBullets===!1&&(P.style.display="none");for(var L=document.createElement("ul"),k=0,O=this._introItems.length;k<O;k++){var N=document.createElement("li"),M=document.createElement("a");M.onclick=function(){t.goToStep(this.getAttribute("data-stepnumber"))},k===e.step-1&&(M.className="active"),m(M),M.innerHTML="&nbsp;",M.setAttribute("data-stepnumber",this._introItems[k].step),N.appendChild(M),L.appendChild(N)}P.appendChild(L),A.className="introjs-progress",this._options.showProgress===!1&&(A.style.display="none");var B=document.createElement("div");if(B.className="introjs-progressbar",B.setAttribute("style","width:"+I.call(this)+"%;"),A.appendChild(B),F.className="introjs-tooltipbuttons",this._options.showButtons===!1&&(F.style.display="none"),q.className="introjs-tooltip",q.appendChild(T),q.appendChild(P),q.appendChild(A),1==this._options.showStepNumbers){var U=document.createElement("span");U.className="introjs-helperNumberLayer",U.innerHTML=e.step,S.appendChild(U)}q.appendChild(j),S.appendChild(q);var w=document.createElement("a");w.onclick=function(){t._introItems.length-1!=t._currentStep&&n.call(t)},m(w),w.innerHTML=this._options.nextLabel;var y=document.createElement("a");y.onclick=function(){0!=t._currentStep&&o.call(t)},m(y),y.innerHTML=this._options.prevLabel;var g=document.createElement("a");g.className="introjs-button introjs-skipbutton",m(g),g.innerHTML=this._options.skipLabel,g.onclick=function(){t._introItems.length-1==t._currentStep&&"function"==typeof t._introCompleteCallback&&t._introCompleteCallback.call(t),t._introItems.length-1!=t._currentStep&&"function"==typeof t._introExitCallback&&t._introExitCallback.call(t),s.call(t,t._targetElement)},F.appendChild(g),this._introItems.length>1&&(F.appendChild(y),F.appendChild(w)),q.appendChild(F),l.call(t,e.element,q,j,U)}this._options.disableInteraction===!0&&f.call(t),y.removeAttribute("tabIndex"),w.removeAttribute("tabIndex"),0==this._currentStep&&this._introItems.length>1?(w.className="introjs-button introjs-nextbutton",1==this._options.hidePrev?(y.className="introjs-button introjs-prevbutton introjs-hidden",w.className+=" introjs-fullbutton"):y.className="introjs-button introjs-prevbutton introjs-disabled",y.tabIndex="-1",g.innerHTML=this._options.skipLabel):this._introItems.length-1==this._currentStep||1==this._introItems.length?(g.innerHTML=this._options.doneLabel,y.className="introjs-button introjs-prevbutton",1==this._options.hideNext?(w.className="introjs-button introjs-nextbutton introjs-hidden",y.className+=" introjs-fullbutton"):w.className="introjs-button introjs-nextbutton introjs-disabled",w.tabIndex="-1"):(y.className="introjs-button introjs-prevbutton",w.className="introjs-button introjs-nextbutton",g.innerHTML=this._options.skipLabel),w.focus(),e.element.className+=" introjs-showElement";var R=v(e.element,"position");"absolute"!==R&&"relative"!==R&&"fixed"!==R&&(e.element.className+=" introjs-relativePosition");for(var H=e.element.parentNode;null!=H&&H.tagName&&"body"!==H.tagName.toLowerCase();){var V=v(H,"z-index"),Q=parseFloat(v(H,"opacity")),G=v(H,"transform")||v(H,"-webkit-transform")||v(H,"-moz-transform")||v(H,"-ms-transform")||v(H,"-o-transform");(/[0-9]+/.test(V)||Q<1||"none"!==G&&void 0!==G)&&(H.className+=" introjs-fixParent"),H=H.parentNode}if(!x(e.element)&&this._options.scrollToElement===!0){var W=e.element.getBoundingClientRect(),X=b().height,Z=W.bottom-(W.bottom-W.top),$=W.bottom-X;Z<0||e.element.clientHeight>X?window.scrollBy(0,Z-this._options.scrollPadding):window.scrollBy(0,$+70+this._options.scrollPadding)}"undefined"!=typeof this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,e.element)}function v(e,t){var a="";return e.currentStyle?a=e.currentStyle[t]:document.defaultView&&document.defaultView.getComputedStyle&&(a=document.defaultView.getComputedStyle(e,null).getPropertyValue(t)),a&&a.toLowerCase?a.toLowerCase():a}function y(e){var t=e.parentNode;return!(!t||"HTML"===t.nodeName)&&("fixed"==v(e,"position")||y(t))}function b(){if(void 0!=window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var e=document.documentElement;return{width:e.clientWidth,height:e.clientHeight}}function x(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom+80<=window.innerHeight&&t.right<=window.innerWidth}function w(e){var t=document.createElement("div"),a="",r=this;if(t.className="introjs-overlay",e.tagName&&"body"!==e.tagName.toLowerCase()){var i=E(e);i&&(a+="width: "+i.width+"px; height:"+i.height+"px; top:"+i.top+"px;left: "+i.left+"px;",
t.setAttribute("style",a))}else a+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;",t.setAttribute("style",a);return e.appendChild(t),t.onclick=function(){1==r._options.exitOnOverlayClick&&(void 0!=r._introExitCallback&&r._introExitCallback.call(r),s.call(r,e))},setTimeout(function(){a+="opacity: "+r._options.overlayOpacity.toString()+";",t.setAttribute("style",a)},10),!0}function _(){var e=this._targetElement.querySelector(".introjs-hintReference");if(e){var t=e.getAttribute("data-step");return e.parentNode.removeChild(e),t}}function z(e){if(this._introItems=[],this._options.hints)for(var t=0,a=this._options.hints.length;t<a;t++){var i=r(this._options.hints[t]);"string"==typeof i.element&&(i.element=document.querySelector(i.element)),i.hintPosition=i.hintPosition||this._options.hintPosition,i.hintAnimation=i.hintAnimation||this._options.hintAnimation,null!=i.element&&this._introItems.push(i)}else{var n=e.querySelectorAll("*[data-hint]");if(n.length<1)return!1;for(var t=0,a=n.length;t<a;t++){var o=n[t],s=o.getAttribute("data-hintAnimation");s=s?"true"==s:this._options.hintAnimation,this._introItems.push({element:o,hint:o.getAttribute("data-hint"),hintPosition:o.getAttribute("data-hintPosition")||this._options.hintPosition,hintAnimation:s,tooltipClass:o.getAttribute("data-tooltipClass"),position:o.getAttribute("data-position")||this._options.tooltipPosition})}}S.call(this),document.addEventListener?(document.addEventListener("click",_.bind(this),!1),window.addEventListener("resize",k.bind(this),!0)):document.attachEvent&&(document.attachEvent("onclick",_.bind(this)),document.attachEvent("onresize",k.bind(this)))}function k(){for(var e=0,t=this._introItems.length;e<t;e++){var a=this._introItems[e];"undefined"!=typeof a.targetElement&&j.call(this,a.hintPosition,a.element,a.targetElement)}}function C(e){_.call(this);var t=this._targetElement.querySelector('.introjs-hint[data-step="'+e+'"]');t&&(t.className+=" introjs-hidehint"),"undefined"!=typeof this._hintCloseCallback&&this._hintCloseCallback.call(this,e)}function D(){var e=this._targetElement.querySelectorAll(".introjs-hint");if(e&&e.length>0)for(var t=0;t<e.length;t++)C.call(this,e[t].getAttribute("data-step"))}function S(){var e=this,t=document.querySelector(".introjs-hints");if(null!=t)a=t;else{var a=document.createElement("div");a.className="introjs-hints"}for(var r=0,i=this._introItems.length;r<i;r++){var n=this._introItems[r];if(!document.querySelector('.introjs-hint[data-step="'+r+'"]')){var o=document.createElement("a");m(o),function(t,a,r){t.onclick=function(i){var n=i?i:window.event;n.stopPropagation&&n.stopPropagation(),null!=n.cancelBubble&&(n.cancelBubble=!0),q.call(e,t,a,r)}}(o,n,r),o.className="introjs-hint",n.hintAnimation||(o.className+=" introjs-hint-no-anim"),y(n.element)&&(o.className+=" introjs-fixedhint");var s=document.createElement("div");s.className="introjs-hint-dot";var l=document.createElement("div");l.className="introjs-hint-pulse",o.appendChild(s),o.appendChild(l),o.setAttribute("data-step",r),n.targetElement=n.element,n.element=o,j.call(this,n.hintPosition,o,n.targetElement),a.appendChild(o)}}document.body.appendChild(a),"undefined"!=typeof this._hintsAddedCallback&&this._hintsAddedCallback.call(this)}function j(e,t,a){var r=E.call(this,a);switch(e){default:case"top-left":t.style.left=r.left+"px",t.style.top=r.top+"px";break;case"top-right":t.style.left=r.left+r.width+"px",t.style.top=r.top+"px";break;case"bottom-left":t.style.left=r.left+"px",t.style.top=r.top+r.height+"px";break;case"bottom-right":t.style.left=r.left+r.width+"px",t.style.top=r.top+r.height+"px";break;case"bottom-middle":t.style.left=r.left+r.width/2+"px",t.style.top=r.top+r.height+"px";break;case"top-middle":t.style.left=r.left+r.width/2+"px",t.style.top=r.top+"px"}}function q(e,t,a){"undefined"!=typeof this._hintClickCallback&&this._hintClickCallback.call(this,e,t,a);var r=_.call(this);if(parseInt(r,10)!=a){var i=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div"),s=document.createElement("div");i.className="introjs-tooltip",i.onclick=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},n.className="introjs-tooltiptext";var p=document.createElement("p");p.innerHTML=t.hint;var c=document.createElement("a");c.className="introjs-button",c.innerHTML=this._options.hintButtonLabel,c.onclick=C.bind(this,a),n.appendChild(p),n.appendChild(c),o.className="introjs-arrow",i.appendChild(o),i.appendChild(n),this._currentStep=e.getAttribute("data-step"),s.className="introjs-tooltipReferenceLayer introjs-hintReference",s.setAttribute("data-step",e.getAttribute("data-step")),h.call(this,s),s.appendChild(i),document.body.appendChild(s),l.call(this,e,i,o,null,!0)}}function E(e){var t={};t.width=e.offsetWidth,t.height=e.offsetHeight;for(var a=0,r=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)a+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;return t.top=r,t.left=a,t}function I(){var e=parseInt(this._currentStep+1,10);return e/this._introItems.length*100}function T(e,t){var a={};for(var r in e)a[r]=e[r];for(var r in t)a[r]=t[r];return a}var P="2.3.0",A=function(e){if("object"==typeof e)return new t(e);if("string"==typeof e){var a=document.querySelector(e);if(a)return new t(a);throw new Error("There is no element with given selector.")}return new t(document.body)};return A.version=P,A.fn=t.prototype={clone:function(){return new t(this)},setOption:function(e,t){return this._options[e]=t,this},setOptions:function(e){return this._options=T(this._options,e),this},start:function(){return a.call(this,this._targetElement),this},goToStep:function(e){return i.call(this,e),this},nextStep:function(){return n.call(this),this},previousStep:function(){return o.call(this),this},exit:function(){return s.call(this,this._targetElement),this},refresh:function(){return h.call(this,document.querySelector(".introjs-helperLayer")),h.call(this,document.querySelector(".introjs-tooltipReferenceLayer")),k.call(this),this},onbeforechange:function(e){if("function"!=typeof e)throw new Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=e,this},onchange:function(e){if("function"!=typeof e)throw new Error("Provided callback for onchange was not a function.");return this._introChangeCallback=e,this},onafterchange:function(e){if("function"!=typeof e)throw new Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=e,this},oncomplete:function(e){if("function"!=typeof e)throw new Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=e,this},onhintsadded:function(e){if("function"!=typeof e)throw new Error("Provided callback for onhintsadded was not a function.");return this._hintsAddedCallback=e,this},onhintclick:function(e){if("function"!=typeof e)throw new Error("Provided callback for onhintclick was not a function.");return this._hintClickCallback=e,this},onhintclose:function(e){if("function"!=typeof e)throw new Error("Provided callback for onhintclose was not a function.");return this._hintCloseCallback=e,this},onexit:function(e){if("function"!=typeof e)throw new Error("Provided callback for onexit was not a function.");return this._introExitCallback=e,this},addHints:function(){return z.call(this,this._targetElement),this},hideHint:function(e){return C.call(this,e),this},hideHints:function(){return D.call(this),this}},e.introJs=A,A}),function(e,t){"use strict";function a(t){var a=e(this);if(m){t=e.extend({},g,t);for(var i=0,n=a.length;i<n;i++)r(a.eq(i),t)}return a}function r(t,a){a=e.extend({},a,t.data("dropper-options"));var r="";r+='<div class="dropper-dropzone">',r+=a.label,r+="</div>",r+='<input class="dropper-input" type="file"',a.maxQueue>1&&(r+=" multiple"),r+=">",t.addClass("dropper").append(r);var i=e.extend({$dropper:t,$input:t.find(".dropper-input"),queue:[],total:0,uploading:!1},a);t.on("click.dropper",".dropper-dropzone",i,n).on("dragenter.dropper",i,s).on("dragover.dropper",i,l).on("dragleave.dropper",i,p).on("drop.dropper",".dropper-dropzone",i,c).data("dropper",i),i.$input.on("change.dropper",i,o)}function n(e){e.stopPropagation(),e.preventDefault();var t=e.data;t.$input.trigger("click")}function o(e){e.stopPropagation(),e.preventDefault();var t=e.data,a=t.$input[0].files;e.data.check(a)&&a.length&&d(t,a)}function s(e){e.stopPropagation(),e.preventDefault();var t=e.data;t.$dropper.addClass("dropping")}function l(e){e.stopPropagation(),e.preventDefault();var t=e.data;t.$dropper.addClass("dropping")}function p(e){e.stopPropagation(),e.preventDefault();var t=e.data;t.$dropper.removeClass("dropping")}function c(e){if(e.preventDefault(),e.data.check(e.originalEvent.dataTransfer.files)){var t=e.data,a=e.originalEvent.dataTransfer.files;t.$dropper.removeClass("dropping"),d(t,a)}}function d(a,r){for(var i=[],n=0;n<r.length;n++){var o={index:a.total++,file:r[n],name:r[n].name,size:r[n].size,started:!1,complete:!1,error:!1,transfer:null};i.push(o),a.queue.push(o)}a.uploading||(e(t).on("beforeunload.dropper",function(){return"You have uploads pending, are you sure you want to leave this page?"}),a.uploading=!0),a.$dropper.trigger("start.dropper",[i]),u(a)}function u(a){var r=0,i=[];for(var n in a.queue)!a.queue.hasOwnProperty(n)||a.queue[n].complete||a.queue[n].error||i.push(a.queue[n]);a.queue=i;for(var o in a.queue)if(a.queue.hasOwnProperty(o)){if(!a.queue[o].started){var s=new FormData;s.append(a.postKey,a.queue[o].file);for(var l in a.postData)a.postData.hasOwnProperty(l)&&s.append(l,a.postData[l]);h(a,a.queue[o],s)}if(r++,r>=a.maxQueue)return;n++}0===r&&(e(t).off("beforeunload.dropper"),a.uploading=!1,a.$dropper.trigger("complete.dropper"))}function h(t,a,r){a.size>=t.maxSize?(a.error=!0,t.$dropper.trigger("fileError.dropper",[a,"上传的文件过大！上传的文件大小必须在“"+f(t.maxSize)+"”内"]),u(t)):(a.started=!0,a.transfer=e.ajax({url:t.action,data:r,type:"POST",contentType:!1,processData:!1,cache:!1,xhr:function(){var r=e.ajaxSettings.xhr();return r.upload&&r.upload.addEventListener("progress",function(e){var r=0,i=e.loaded||e.position,n=e.total;e.lengthComputable&&(r=Math.ceil(i/n*100)),t.$dropper.trigger("fileProgress.dropper",[a,r])},!1),r},beforeSend:function(e){t.$dropper.trigger("fileStart.dropper",[a])},success:function(e,r,i){a.complete=!0,t.$dropper.trigger("fileComplete.dropper",[a,e]),u(t)},error:function(e,r,i){a.error=!0,t.$dropper.trigger("fileError.dropper",[a,i]),u(t)}}))}function f(e){if(0===e)return"0 B";var t=1024,a=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];return i=Math.floor(Math.log(e)/Math.log(t)),e/Math.pow(t,i)+" "+a[i]}var m=t.File&&t.FileReader&&t.FileList,g={action:"",label:"Drag and drop files or click to select",maxQueue:1,maxSize:41943040,postData:{},postKey:"file",check:function(){return!0}},v={defaults:function(t){return g=e.extend(g,t||{}),e(this)}};e.fn.dropper=function(e){return v[e]?v[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?this:a.apply(this,arguments)},e.dropper=function(e){"defaults"===e&&v.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery,window),function(e,t){if("object"==typeof exports&&exports)t(exports);else{var a={};t(a),"function"==typeof define&&define.amd?define(a):e.Mustache=a}}(this,function(e){function t(e,t){return b.call(e,t)}function a(e){return!t(m,e)}function r(e){return"function"==typeof e}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function n(e){return String(e).replace(/[&<>"'\/]/g,function(e){return _[e]})}function o(e){if(!w(e)||2!==e.length)throw new Error("Invalid tags: "+e);return[new RegExp(i(e[0])+"\\s*"),new RegExp("\\s*"+i(e[1]))]}function s(t,r){function n(){if(D&&!S)for(;C.length;)delete k[C.pop()];else C=[];D=!1,S=!1}r=r||e.tags,t=t||"","string"==typeof r&&(r=r.split(f));for(var s,d,u,m,b,x,w=o(r),_=new c(t),z=[],k=[],C=[],D=!1,S=!1;!_.eos();){if(s=_.pos,u=_.scanUntil(w[0]))for(var j=0,q=u.length;j<q;++j)m=u.charAt(j),a(m)?C.push(k.length):S=!0,k.push(["text",m,s,s+1]),s+=1,"\n"===m&&n();if(!_.scan(w[0]))break;if(D=!0,d=_.scan(y)||"name",_.scan(h),"="===d?(u=_.scanUntil(g),_.scan(g),_.scanUntil(w[1])):"{"===d?(u=_.scanUntil(new RegExp("\\s*"+i("}"+r[1]))),_.scan(v),_.scanUntil(w[1]),d="&"):u=_.scanUntil(w[1]),!_.scan(w[1]))throw new Error("Unclosed tag at "+_.pos);if(b=[d,u,s,_.pos],k.push(b),"#"===d||"^"===d)z.push(b);else if("/"===d){if(x=z.pop(),!x)throw new Error('Unopened section "'+u+'" at '+s);if(x[1]!==u)throw new Error('Unclosed section "'+x[1]+'" at '+s)}else"name"===d||"{"===d||"&"===d?S=!0:"="===d&&(w=o(r=u.split(f)))}if(x=z.pop())throw new Error('Unclosed section "'+x[1]+'" at '+_.pos);return p(l(k))}function l(e){for(var t,a,r=[],i=0,n=e.length;i<n;++i)t=e[i],t&&("text"===t[0]&&a&&"text"===a[0]?(a[1]+=t[1],a[3]=t[3]):(r.push(t),a=t));return r}function p(e){for(var t,a,r=[],i=r,n=[],o=0,s=e.length;o<s;++o)switch(t=e[o],t[0]){case"#":case"^":i.push(t),n.push(t),i=t[4]=[];break;case"/":a=n.pop(),a[5]=t[2],i=n.length>0?n[n.length-1][4]:r;break;default:i.push(t)}return r}function c(e){this.string=e,this.tail=e,this.pos=0}function d(e,t){this.view=null==e?{}:e,this.cache={".":this.view},this.parent=t}function u(){this.cache={}}var h=/\s*/,f=/\s+/,m=/\S/,g=/\s*=/,v=/\s*\}/,y=/#|\^|\/|>|\{|&|=|!/,b=RegExp.prototype.test,x=Object.prototype.toString,w=Array.isArray||function(e){return"[object Array]"===x.call(e)},_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};c.prototype.eos=function(){return""===this.tail},c.prototype.scan=function(e){var t=this.tail.match(e);if(t&&0===t.index){var a=t[0];return this.tail=this.tail.substring(a.length),this.pos+=a.length,a}return""},c.prototype.scanUntil=function(e){var t,a=this.tail.search(e);switch(a){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,a),this.tail=this.tail.substring(a)}return this.pos+=t.length,t},d.prototype.push=function(e){return new d(e,this)},d.prototype.lookup=function(e){var t;if(e in this.cache)t=this.cache[e];else{for(var a=this;a;){if(e.indexOf(".")>0){t=a.view;for(var i=e.split("."),n=0;null!=t&&n<i.length;)t=t[i[n++]]}else t=a.view[e];if(null!=t)break;a=a.parent}this.cache[e]=t}return r(t)&&(t=t.call(this.view)),t},u.prototype.clearCache=function(){this.cache={}},u.prototype.parse=function(e,t){var a=this.cache,r=a[e];return null==r&&(r=a[e]=s(e,t)),r},u.prototype.render=function(e,t,a){var r=this.parse(e),i=t instanceof d?t:new d(t);return this.renderTokens(r,i,a,e)},u.prototype.renderTokens=function(t,a,i,n){function o(e){return c.render(e,a,i)}for(var s,l,p="",c=this,d=0,u=t.length;d<u;++d)switch(s=t[d],s[0]){case"#":if(l=a.lookup(s[1]),!l)continue;if(w(l))for(var h=0,f=l.length;h<f;++h)p+=this.renderTokens(s[4],a.push(l[h]),i,n);else if("object"==typeof l||"string"==typeof l)p+=this.renderTokens(s[4],a.push(l),i,n);else if(r(l)){if("string"!=typeof n)throw new Error("Cannot use higher-order sections without the original template");l=l.call(a.view,n.slice(s[3],s[5]),o),null!=l&&(p+=l)}else p+=this.renderTokens(s[4],a,i,n);break;case"^":l=a.lookup(s[1]),(!l||w(l)&&0===l.length)&&(p+=this.renderTokens(s[4],a,i,n));break;case">":if(!i)continue;l=r(i)?i(s[1]):i[s[1]],null!=l&&(p+=this.renderTokens(this.parse(l),a,i,l));break;case"&":l=a.lookup(s[1]),null!=l&&(p+=l);break;case"name":l=a.lookup(s[1]),null!=l&&(p+=e.escape(l));break;case"text":p+=s[1]}return p},e.name="mustache.js",e.version="0.8.1",e.tags=["{{","}}"];var z=new u;e.clearCache=function(){return z.clearCache()},e.parse=function(e,t){return z.parse(e,t)},e.render=function(e,t,a){return z.render(e,t,a)},e.to_html=function(t,a,i,n){var o=e.render(t,a,i);return r(n)?void n(o):o},e.escape=n,e.Scanner=c,e.Context=d,e.Writer=u}),!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.WebStorageCache=t()}(this,function(){"use strict";function e(e,t){for(var a in t)e[a]=t[a];return e}function t(e){var t=!1;if(e&&e.setItem){t=!0;var a="__"+Math.round(1e7*Math.random());try{e.setItem(a,a),e.removeItem(a)}catch(e){t=!1}}return t}function a(e){var t=typeof e;return"string"===t&&window[e]instanceof Storage?window[e]:e}function r(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())}function i(e,t){if(t=t||new Date,"number"==typeof e?e=e===1/0?d:new Date(t.getTime()+1e3*e):"string"==typeof e&&(e=new Date(e)),e&&!r(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e}function n(e){var t=!1;if(e)if(e.code)switch(e.code){case 22:t=!0;break;case 1014:"NS_ERROR_DOM_QUOTA_REACHED"===e.name&&(t=!0)}else-2147024882===e.number&&(t=!0);return t}function o(e,t){this.c=(new Date).getTime(),t=t||u;var a=i(t);this.e=a.getTime(),this.v=e}function s(e){return"object"==typeof e&&!!(e&&"c"in e&&"e"in e&&"v"in e)}function l(e){var t=(new Date).getTime();return t<e.e}function p(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function c(i){var n={storage:"localStorage",exp:1/0},o=e(n,i),s=o.exp;if(s&&"number"!=typeof s&&!r(s))throw new Error("Constructor `exp` parameter cannot be converted to a valid Date instance");u=s;var l=a(o.storage),p=t(l);this.isSupported=function(){return p},p?(this.storage=l,this.quotaExceedHandler=function(e,t,a){if(console.warn("Quota exceeded!"),a&&a.force===!0){var r=this.deleteAllExpires();console.warn("delete all expires CacheItem : ["+r+"] and try execute `set` method again!");try{a.force=!1,this.set(e,t,a)}catch(e){console.warn(e)}}}):e(this,f)}var d=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),u=d,h={serialize:function(e){return JSON.stringify(e)},deserialize:function(e){return e&&JSON.parse(e)}},f={set:function(){},get:function(){},delete:function(){},deleteAllExpires:function(){},clear:function(){},add:function(){},replace:function(){},touch:function(){}},m={set:function(t,a,r){if(t=p(t),r=e({force:!0},r),void 0===a)return this.delete(t);var i=h.serialize(a),s=new o(i,r.exp);try{this.storage.setItem(t,h.serialize(s))}catch(e){n(e)?this.quotaExceedHandler(t,i,r,e):console.error(e)}return a},get:function(e){e=p(e);var t=null;try{t=h.deserialize(this.storage.getItem(e))}catch(e){return null}if(s(t)){if(l(t)){var a=t.v;return h.deserialize(a)}this.delete(e)}return null},delete:function(e){return e=p(e),this.storage.removeItem(e),e},deleteAllExpires:function(){for(var e=this.storage.length,t=[],a=this,r=0;e>r;r++){var i=this.storage.key(r),n=null;try{n=h.deserialize(this.storage.getItem(i))}catch(e){}if(null!==n&&void 0!==n.e){var o=(new Date).getTime();o>=n.e&&t.push(i)}}return t.forEach(function(e){a.delete(e)}),t},clear:function(){this.storage.clear()},add:function(t,a,r){t=p(t),r=e({force:!0},r);try{var i=h.deserialize(this.storage.getItem(t));if(!s(i)||!l(i))return this.set(t,a,r),!0}catch(e){return this.set(t,a,r),!0}return!1},replace:function(e,t,a){e=p(e);var r=null;try{r=h.deserialize(this.storage.getItem(e))}catch(e){return!1}if(s(r)){if(l(r))return this.set(e,t,a),!0;this.delete(e)}return!1},touch:function(e,t){e=p(e);var a=null;try{a=h.deserialize(this.storage.getItem(e))}catch(e){return!1}if(s(a)){if(l(a))return this.set(e,this.get(e),{exp:t}),!0;this.delete(e)}return!1}};return c.prototype=m,c}),function(e){"undefined"!=typeof module&&"object"==typeof exports&&define.cmd?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):window.zeroGrid=e}(function(e,t){function a(){for(var e=[],t="0123456789abcdef",a=0;a<36;a++)e[a]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="",e.join("")}function r(e,a){for(var r in a)if(r===e)return a[r]!==t&&null!==a[r]?a[r]:"";return""}function i(e,a){var r=/(\\)?\{{([^\{\}\\]+)(\\)?\}}/g;return e.replace(r,function(e,r,i,n){if(r||n)return e.replace("\\","");var o,s,l=i.replace(/\s/g,"").split("."),p=a;for(o=0;o<l.length;o++)if(s=l[o],p=p[s],p===t||null===p)return"";return p})}function n(e,a,r){for(var i=[],n=(a-1)*r;n<a*r;n++)e[n]!==t&&i.push(e[n]);return i}function o(e){if(e instanceof Array){for(var t=[],a=0;a<e.length;++a)t[a]=o(e[a]);return t}if(e instanceof Object){var t={};for(var a in e)t[a]=o(e[a]);return t}return e}var s=function(e){this.params={container:".zerogrid-container",columns:[],url:"",pageIndex:1,pageSize:20,pagination:!0,paginationStyle:"full",checkboxProperty:t,checkboxPropertyFunc:t,checkboxPropertyTitle:t,checkboxCheckedFunc:t,checkboxCheckFunc:t,radioboxProperty:t,radioboxPropertyFunc:t,tHeadTrAppendAttr:t,formId:"",loadBeforeListener:t,loadAfterListener:t,renderBeforeListener:t,renderAfterListener:t,paginationChangeAfterListener:t,unique:a(),datas:[],parseLoadDataFunc:t,frontFilterDataFunc:t},this.tempData={pageTotalSize:1,sortField:"",sortOrder:"",isloading:!1,datas:[]},this.init(e)};return s.prototype={init:function(t){e.extend(this.params,t),"undefined"!=typeof this.params.url&&""!==this.params.url||"undefined"!=typeof this.params.datas&&(this.tempData.datas=this.params.datas)},render:function(){this.params.renderBeforeListener!==t&&this.params.renderBeforeListener(this.params),this.renderTable(),this.params.renderAfterListener!==t&&this.params.renderAfterListener(this.params),this.load()},renderTable:function(){var t='<div id="waitDiv_{{unique}}" class="ui_grid_loading"></div>';t+='   <table class="zero-grid zero-grid-hover" id="table_{{unique}}" table-unique="{{unique}}">',t+="       <thead><tr "+("undefined"!==this.params.tHeadTrAppendAttr?this.params.tHeadTrAppendAttr:"")+">","undefined"==typeof this.params.checkboxProperty&&"undefined"==typeof this.params.radioboxProperty||(t+='       <th class="bh-bg-info-5 bh-bColor-info-3" style="text-align:center;padding-left:0;{{^checkboxPropertyTitle}}width:34px;{{/checkboxPropertyTitle}}">',t+="       {{#checkboxProperty}}",t+='           <div class="bh-checkbox" style="width:32px;padding-top:0"><label style="padding: 0 4px 0 10px"><input type="checkbox" id="checkboxAll_{{unique}}"><i class="bh-choice-helper" style="position:static;margin-right:0;"></i></label></div>',t+="       {{/checkboxProperty}}",t+="       </th>"),t+="{{#columns}}",t+='   <th{{#width}} {{#minwidth}}style="min-width:{{minwidth}}"{{/minwidth}} style="width:{{width}}"{{/width}}>',t+='       {{#sort}} <a class="ui_grid_sort_default" role="sort" sort="{{sort}}">{{display}}</a> {{/sort}}',t+="       {{^sort}} {{display}} {{/sort}}",t+="   </th>",t+="{{/columns}}",t+="       </tr></thead>",t+='       <tbody id="tbody_{{unique}}" style="font-size:12px;"></tbody>',t+="   </table>",t+='   <div id="pagination_{{unique}}" class="zero-grid-pagination-d"></div>',e(this.params.container).html(Mustache.render(t,this.params)),this.bindTableEvent()},load:function(a,r){if(!this.loading){this.loading=!0,this.openWaitDiv(),this.resetCheckboxStatus(),a!==t&&(this.params.pageIndex=a);var i=this;if(this.params.loadBeforeListener!==t&&this.params.loadBeforeListener(),"undefined"!=typeof this.params.url&&""!==this.params.url){var o=e("#"+this.params.formId).serialize()+"&pageIndex="+this.params.pageIndex+"&pageSize="+this.params.pageSize+"&sortField="+this.tempData.sortField+"&sortOrder="+this.tempData.sortOrder;r!==t&&(o+="&"+_params),e.ajax({url:this.params.url+(this.params.url.indexOf("?")!==-1?"&":"?")+"_="+(new Date).getTime(),dataType:"json",data:o,type:window.ZERO_DEBUG_MODE===!0?"get":"post",error:function(){console.log("数据加载异常！请检查是否登录超时。")},success:function(e){var t=e;"undefined"!=typeof i.params.parseLoadDataFunc&&(t=i.params.parseLoadDataFunc(e)),t.pageIndex=parseInt(t.pageIndex),t.pageSize=parseInt(t.pageSize),t.total=parseInt(t.total),i.tempData.datas=t.datas,i.renderData(t)}})}else{var s=this.tempData.datas;"function"==typeof this.params.frontFilterDataFunc&&(s=this.params.frontFilterDataFunc(this.tempData.datas));var l={total:s.length,pageIndex:this.params.pageIndex,pageSize:this.params.pageSize,datas:this.params.pagination?n(s,this.params.pageIndex,this.params.pageSize):s};this.params.pagination&&0===l.datas.length&&1!==l.pageIndex?(this.loading=!1,this.load(l.pageIndex-1)):this.renderData(l)}}},renderData:function(a){var n="";if(a.datas.length>0)for(var s=0;s<a.datas.length;s++){n+="<tr>","undefined"!=typeof this.params.checkboxProperty?(n+='<td style="text-align:center;padding-left:0">',("undefined"==typeof this.params.checkboxPropertyFunc||this.params.checkboxPropertyFunc(a.datas[s]))&&(n+='<div class="bh-checkbox" style="width:32px;padding-top:0"><label style="padding: 0 4px 0 10px">',n+='<input type="checkbox" name="box_'+this.params.unique+'" id="box_'+s+'" value="'+r(this.params.checkboxProperty,a.datas[s])+'"><i class="bh-choice-helper" style="position:static;margin-right:0;"></i>',n+="</label></div>"),n+="</td>"):"undefined"!=typeof this.params.radioboxProperty&&(n+='<td style="text-align:center;padding-left:0">',("undefined"==typeof this.params.radioboxPropertyFunc||this.params.radioboxPropertyFunc(a.datas[s]))&&(n+='<div class="bh-radio"><label style="padding: 0 8px 0 12px;">',n+='<input type="radio" id="rdo_'+s+'" name="box_'+this.params.unique+'" value="'+r(this.params.radioboxProperty,a.datas[s])+'">',n+='<i class="bh-choice-helper" style="position:static;margin-right:0;"></i></label></div>'),n+="</td>");for(var l=0;l<this.params.columns.length;l++){var p=this.params.columns[l];n+="<td"+(p.append!==t?" "+p.append:"")+">";var c="";if(p.view!==t)if("function"==typeof p.view)c=p.view(a.datas[s],l);else{var d=o(a.datas[s]);d.index=s,c=i(p.view,d)}else c=r(p.property,a.datas[s]);n+=c+"</td>"}}else{var u=this.params.columns.length+(this.hasBox()?1:0);n+='<tr><td style="text-align:center;" colspan="'+u+'">没有数据显示！</td></tr>'}if(e("#tbody_"+this.params.unique).html(n),this.params.pagination){if(this.tempData.pageTotalSize=Math.ceil(a.total/a.pageSize),isNaN(this.tempData.pageTotalSize))return;for(var h=[],f=5*Math.floor((a.pageIndex-1)/5),s=1;s<=5;s++){var m=f++ +1;m<=this.tempData.pageTotalSize&&h.push(m)}var g="<div>";g+='      <a class="zero-grid-pagination-a" title="Go最前页" role="goFirstPage" href="javascript:void(0)">««</a>',g+='      <a class="zero-grid-pagination-a" title="Go上一页" role="goPreviousPage" href="javascript:void(0)">«</a>';for(var s=0;s<h.length;s++){var v="bh-color-primary";h[s]==a.pageIndex&&(v="bh-bg-primary bh-color-primary-5 bh-bColor-primary"),g+='  <a class="zero-grid-pagination-a '+v+'" href="javascript:void(0)" role="goPageIndex" pageindex="'+h[s]+'" title="Go第'+h[s]+'页">'+h[s]+"</a>"}g+='      <a class="zero-grid-pagination-a" title="Go下一页" role="goNextPage" href="javascript:void(0)">»</a>',g+='      <a class="zero-grid-pagination-a" title="Go最后页" role="goLastPage" href="javascript:void(0)">»»</a>',"full"===this.params.paginationStyle?(g+='  <span class="zero-grid-pagination-des">共'+a.total+"条数据，分"+this.tempData.pageTotalSize+"页显示，",g+=this.buildPageSizeSelect()+"</span>"):"short"===this.params.paginationStyle&&(g+='  <span class="zero-grid-pagination-des">共'+a.total+"条数据。</span>"),e("#pagination_"+this.params.unique).html(g)}this.bindLoadEvent(),this.closeWaitDiv(),this.params.loadAfterListener!==t&&this.params.loadAfterListener(a),this.loading=!1},buildPageSizeSelect:function(){var e=this.params.pageSize,t='每页显示<select role="goPageSize" class="zero-grid-pagination-pz">';return t+='<option value="8" '+(8==e?"selected=selected":"")+">8</option>",t+='<option value="10" '+(10==e?"selected=selected":"")+">10</option>",t+='<option value="30" '+(30==e?"selected=selected":"")+">30</option>",t+='<option value="50" '+(50==e?"selected=selected":"")+">50</option>",t+='<option value="100" '+(100==e?"selected=selected":"")+">100</option>",t+="</select>条数据。"},openWaitDiv:function(){var t=e("#waitDiv_"+this.params.unique),a=(e("#table_"+this.params.unique).position().left,e("#table_"+this.params.unique).position().top,e("#table_"+this.params.unique).width()),r=e("#table_"+this.params.unique).height();t.css({position:"absolute",width:a,height:r,display:"block"})},closeWaitDiv:function(){e("#waitDiv_"+this.params.unique).css({display:"none"})},bindTableEvent:function(){var a=this;e("#checkboxAll_"+this.params.unique).click(function(){var e=this.checked;if("function"==typeof a.params.checkboxCheckFunc)a.params.checkboxCheckFunc(e);else for(var r=document.getElementsByName("box_"+a.params.unique),i=0;i<r.length;i++)r[i].checked=e;a.params.checkboxCheckedFunc!==t&&a.params.checkboxCheckedFunc()}),e("#table_"+this.params.unique).on("click","td",function(){})},bindLoadEvent:function(){var a=this,r=e(this.params.container);r.find("a[role='goFirstPage']").click(function(){0!==a.tempData.pageTotalSize&&(a.params.pageIndex=1,a.load(),"function"==typeof a.params.paginationChangeAfterListener&&a.params.paginationChangeAfterListener())}),r.find("a[role='goPreviousPage']").click(function(){if(0!==a.tempData.pageTotalSize){var e=a.params.pageIndex-1;e<=0&&(e=1),a.params.pageIndex=e,a.load(),"function"==typeof a.params.paginationChangeAfterListener&&a.params.paginationChangeAfterListener()}}),r.find("a[role='goNextPage']").click(function(){if(0!==a.tempData.pageTotalSize){var e=a.params.pageIndex+1;e>a.tempData.pageTotalSize&&(e=a.tempData.pageTotalSize),a.params.pageIndex=e,a.load(),"function"==typeof a.params.paginationChangeAfterListener&&a.params.paginationChangeAfterListener()}}),r.find("a[role='goLastPage']").click(function(){0!==a.tempData.pageTotalSize&&(a.params.pageIndex=a.tempData.pageTotalSize,a.load(),"function"==typeof a.params.paginationChangeAfterListener&&a.params.paginationChangeAfterListener())}),r.find("a[role='goPageIndex']").click(function(){0!==a.tempData.pageTotalSize&&(a.params.pageIndex=parseInt(e(this).attr("pageindex")),a.load(),"function"==typeof a.params.paginationChangeAfterListener&&a.params.paginationChangeAfterListener())}),r.find("select[role='goPageSize']").change(function(){a.params.pageSize=parseInt(this.value),a.params.pageIndex=1,a.load(),"function"==typeof a.params.paginationChangeAfterListener&&a.params.paginationChangeAfterListener()}),r.find("a[role='sort']").unbind("click"),r.find("a[role='sort']").click(function(){a.resetSortClass();var r=e(this).attr("sort");e(this).removeClass(),a.tempData.sortField===r?a.tempData.sortOrder===t||""===a.tempData.sortOrder?(a.tempData.sortOrder="asc",e(this).addClass("ui_grid_sort_asc")):"asc"===a.tempData.sortOrder?(a.tempData.sortOrder="desc",e(this).addClass("ui_grid_sort_desc")):(a.tempData.sortOrder="asc",e(this).addClass("ui_grid_sort_asc")):(a.tempData.sortOrder="asc",e(this).addClass("ui_grid_sort_asc")),a.tempData.sortField=r,a.params.pageIndex=1,a.load()})},resetCheckboxStatus:function(){e("#checkboxAll_"+this.params.unique).attr("checked",!1)},hasBox:function(){return this.params.checkboxProperty!==t||this.params.radioboxProperty!==t},resetSortClass:function(){e("#table_"+this.params.unique).find("a[role='sort']").each(function(t){e(this).removeClass(),e(this).addClass("ui_grid_sort_default")})},getSelectedVal:function(){for(var e="",t=document.getElementsByName("box_"+this.params.unique),a=0;a<t.length;a++){var r=t[a];r.checked&&(""!==e&&(e+=","),e+=r.value)}return e},getDatas:function(){return this.tempData.datas},setDatas:function(e){this.datas=e,this.tempData.datas=e},getDatasByProperty:function(e,t){for(var a=[],i=e.split(","),n=0;n<i.length;n++)for(var o=0;o<this.tempData.datas.length;o++){var s=r(t,this.tempData.datas[o]);if(s===i[n]){a.push(this.tempData.datas[o]);break}}return a}},s}(jQuery)),function(e){"undefined"!=typeof module&&"object"==typeof exports&&define.cmd?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):window.zeroModal=e}(function(e,t){function a(t){var a={};return e.extend(a,k),e.extend(a,t),"undefined"!=typeof a.unique&&""!==a.unique||(a.unique=m()),j[a.unique]=a,a}function r(e){"function"==typeof e.onOpen&&e.onOpen(e),n(e),o(e)}function i(t){"object"==typeof t&&("function"==typeof t.onCleanup&&t.onCleanup(),e('[zero-unique-overlay="'+t.unique+'"]').remove(),e('[zero-unique-container="'+t.unique+'"]').remove(),
e('[zero-unique-loading="'+t.unique+'"]').remove(),"function"==typeof t.onClosed&&t.onClosed()),y()}function n(t){if(D++,t._tmp_last_zindex=D,t._width=e(document).width(),t._height=e(document).height(),t.overlay){var a=e(Mustache.render(w,t));e("body").append(a),t.overlayClose?(a.css("cursor","pointer"),a.click(function(){i(t)})):a.click(function(){h(e('[zero-unique-container="'+t.unique+'"]'))})}}function o(a){D++;var r=a.width.replace("px",""),n=a.height.replace("px",""),o=e(window).width(),l=e(window).height();r.indexOf("%")!==-1&&(r=o*parseInt(r.replace("%",""))/100),n.indexOf("%")!==-1&&(n=l*parseInt(n.replace("%",""))/100),"string"==typeof r&&(r=parseInt(r)),"string"==typeof n&&(n=parseInt(n));var c=(o-r)/2+8+"px",h=e(window).scrollTop()+Math.ceil((e(window).height()-n)/3)+9+"px";if(a.top!==t&&(h=a.top),a.left!==t&&(c=a.left),a._tmp_last_zindex=D,a._width=r,a._height=n,a._left=c,a._top=h,e("body").append(Mustache.render(_,a)),a.drag){var f;f="container"===a.dragHandle?e('[zero-unique-container="'+a.unique+'"]')[0]:e('[zero-unique-top="'+a.unique+'"]')[0],new b(e('[zero-unique-container="'+a.unique+'"]')[0],{handle:f,limit:!1})}e('[zero-close-unique="'+a.unique+'"]').click(function(){i(j[e(this).attr("zero-close-unique")])}),e('[zero-max-unique="'+a.unique+'"]').click(function(){var t=e('[zeromodal-unqiue-header="'+a.unique+'"]');e('[zero-title-unique="'+a.unique+'"]').removeClass("modal-title-min"),e('[zero-unique-body="'+a.unique+'"]').show(),e('[zero-unique-container="'+a.unique+'"]').removeClass("zeromodal-fixed"),"2"!==t.attr("zero-status")?(p(j[e(this).attr("zero-max-unique")],"95%","95%"),t.attr("zero-status","2")):(p(j[e(this).attr("zero-max-unique")]),t.attr("zero-status","1")),d(a)}),e('[zero-min-unique="'+a.unique+'"]').click(function(){var r=e('[zeromodal-unqiue-header="'+a.unique+'"]'),i=e('[zero-unique-container="'+a.unique+'"]'),n=e('[zero-unique-body="'+a.unique+'"]');if("0"!==r.attr("zero-status")){if(n.hide(),i.css("height","22px").css("width","220px").addClass("zeromodal-fixed"),e('[zero-title-unique="'+a.unique+'"]').addClass("modal-title-min"),a.minPosition!==t&&""!==a.minPosition){var o=a.minPosition.split(",");2===o.length&&i.css("left",o[0]+"px").css("top",parseInt(o[1])+e(window).scrollTop()+"px")}r.attr("zero-status","0")}else e('[zero-title-unique="'+a.unique+'"]').removeClass("modal-title-min"),n.show(),i.removeClass("zeromodal-fixed"),p(j[e(this).attr("zero-min-unique")]),r.attr("zero-status","1")}),a.transition&&e(".zeromodal-container").animate({top:h},300),d(a),a.resize&&g(a.unique,a),"function"==typeof a.onLoad&&a.onLoad(a);var m=e('[zero-unique-body="'+a.unique+'"]');if(a.url)if(m.append('<div class="zeromodal-loading1"></div>'),a.iframe){var y=e('[zero-unique-frame="'+a.unique+'"]');y.load(function(){e(".zeromodal-loading1").remove(),"function"==typeof a.onComplete&&a.onComplete(a)})}else e.ajax({url:a.url,dataType:"html",type:a.ajaxType,data:a.ajaxData,success:function(t){m.append(t),e(".zeromodal-loading1").remove(),"function"==typeof a.onComplete&&a.onComplete(a)}}),u(a);else a.escape?m.html(a.content):m.text(a.content),"function"==typeof a.onComplete&&a.onComplete(a),u(a);a.forbidBodyScroll&&v(),s(a,e('[zero-unique-container="'+a.unique+'"]')),a.esc&&e("body").one("keyup",function(e){27===e.keyCode&&i(a)})}function s(a,r){if(a.ok||a.cancel||a.buttons!==t&&a.buttons.length>0){var n='<div class="zeromodal-footer">';if(n+=a.buttonTopLine?'<div class="zeromodal-line"></div>':"",n+='        <div zeromodal-btn-container="'+a.unique+'" class="zeromodal-btn-container"></div>',n+="   </div>",r.append(n),a.buttons!==t&&a.buttons.length>0)for(var o=0;o<a.buttons.length;o++){var s=a.buttons[o],l=e('<button zero-btn-unique="'+a.unique+'" class="'+(s.className||"")+'"'+(s.attr!==t?" "+s.attr:"")+">"+s.name+"</button>");"function"==typeof s.fn&&!function(e){l.click(function(){var t=e.fn(a);("undefined"==typeof t||t)&&i(a)})}(s),e('[zeromodal-btn-container="'+a.unique+'"]').append(l)}else{if(a.ok){var p=e('<button zeromodal-btn-ok="'+a.unique+'" class="zeromodal-btn zeromodal-btn-primary">'+a.okTitle+"</button>");e('[zeromodal-btn-container="'+a.unique+'"]').append(p),p.click(function(){if("function"==typeof a.okFn){var e=a.okFn();("undefined"==typeof e||e)&&i(a)}else i(a)})}if(a.cancel){var c=e('<button zeromodal-btn-cancel="'+a.unique+'" class="zeromodal-btn zeromodal-btn-default">'+a.cancelTitle+"</button>");e('[zeromodal-btn-container="'+a.unique+'"]').append(c),c.click(function(){if("function"==typeof a.cancelFn){var e=a.cancelFn();("undefined"==typeof e||e)&&i(a)}else i(a)})}}}}function l(t){"undefined"!=typeof t&&"undefined"!=typeof t.cancelTitle||(t.cancelTitle="取消"),"undefined"==typeof t.width&&(t.width="350px"),"undefined"==typeof t.height&&(t.height="300px");var i=a(t);i.esc=!0,i.ok=!0,i.buttonTopLine=!1,"undefined"!=typeof _okFn&&(i.okFn=_okFn),"undefined"!=typeof cancelFn&&(i.cancelFn=cancelFn),i._content=i.content||"",i.content="",r(i);var n=e('[zero-unique-body="'+i.unique+'"]');n.append(Mustache.render(z,i)),n.removeClass("zeromodal-overflow-y"),e('[zero-unique-body="'+i.unique+'"]').removeClass("zeromodal-overflow-y"),e('[zeromodal-btn-ok="'+i.unique+'"]').focus(),C=!0,e(window).resize(function(){C&&p(i)})}function p(a,r,i){var n=e('[zero-unique-container="'+a.unique+'"]');e('[zero-unique-overlay="'+a.unique+'"]').css("width",e(document).width()+"px").css("height",e(document).height()+"px");var o=e(window).width(),s=e(window).height(),l=r!==t?r.replace("px",""):a.width.replace("px",""),p=i!==t?i.replace("px",""):a.height.replace("px","");l.indexOf("%")!==-1&&(l=o*parseInt(l.replace("%",""))/100),p.indexOf("%")!==-1&&(p=s*parseInt(p.replace("%",""))/100),"string"==typeof l&&(l=parseInt(l)),"string"==typeof p&&(p=parseInt(p));var c=(o-l)/2+"px",d=e(window).scrollTop()+Math.ceil((e(window).height()-p)/3)+"px";a.left!==t&&(c=a.left),a.top!==t&&(d=a.top),n.css("width",l+"px").css("height",p+"px").css("left",c).css("top",d)}function c(t){var a=e(window).width(),r=(e(window).height(),e('[zero-unique-container="'+t.unique+'"]')),i=parseInt(r.css("width").replace("px","")),n=parseInt(r.css("height").replace("px","")),o=(a-i)/2,s=e(window).scrollTop()+Math.ceil((e(window).height()-n)/3);r.css("left",o+"px").css("top",s+"px")}function d(a){var r=e('[zeromodal-unqiue-header="'+a.unique+'"]').height(),i=a.ok||a.cancel||a.buttons!==t&&a.buttons.length>0?60:0,n=e('[zero-unique-container="'+a.unique+'"]').height()-r-10-i;e('[zero-unique-body="'+a.unique+'"]').css("height",n)}function u(t){var a=e('[zero-unique-body="'+t.unique+'"]');a.niceScroll({cursorcolor:"#ccc",cursoropacitymax:1,touchbehavior:!1,cursorwidth:"5px",cursorborder:"0",cursorborderradius:"5px",autohidemode:!1})}function h(e){if(0!==e.length){for(var t=e.position().left,a=0;a<2;a++)e.animate({left:t-2},50),e.animate({left:t},50),e.animate({left:t+2},50);e.animate({left:t},50)}}function f(e,t){for(var a=0;a<e.length;a++)if(e[a]===t)return!0;return!1}function m(){for(var e=[],t="0123456789abcdef",a=0;a<36;a++)e[a]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="";var r=e.join("");return r}function g(a,r){var i,n,o,s=!1,l=e('[zero-unique-sweep-tee="'+a+'"]')[0];e('[zero-unique-body="'+a+'"]')[0];document.onmousemove=function(a){0!==e('[zero-unique-container="'+r.unique+'"]').size()&&(n=a.pageX,o=a.pageY,i!==t&&(s=!0))},l.onmousedown=function(){document.onselectstart=function(){return!1};var t=o-l.offsetTop,a=n-l.offsetLeft;i=setInterval(function(){if(i&&s){var r=n-a,l=o-t;e(".zeromodal-container").css("width",r+3+"px").css("height",l+3+"px")}},5)},document.onmouseup=function(){0!==e('[zero-unique-container="'+r.unique+'"]').size()&&(document.onselectstart=function(){return!0},clearInterval(i),i=t,s=!1,c(r),d(r),r.resizeAfterFn!==t&&"function"==typeof r.resizeAfterFn&&r.resizeAfterFn(r))}}function v(){e("html").addClass("zeromodal-overflow-hidden").addClass("zeromodal-scroll-margin")}function y(){e("html").removeClass("zeromodal-overflow-hidden").removeClass("zeromodal-scroll-margin")}function b(){this.initialize.apply(this,arguments)}var x={},w='<div zero-unique-overlay="{{unique}}" class="zeromodal-overlay" style="opacity:{{opacity}};z-index:{{_tmp_last_zindex}};width:{{_width}}px;height:{{_height}}px"></div>',_='<div zero-unique-container="{{unique}}" class="zeromodal-container" style="z-index:{{_tmp_last_zindex}};width:{{_width}}px;height:{{_height}}px;left:{{_left}};top:{{_top}};{{containerAppendStyle}}">';_+='       {{#drag}}<div zero-unique-top="{{unique}}" class="zeromodal-top"></div>{{/drag}}',_+='       <div zeromodal-unqiue-header="{{unique}}" class="zeromodal-header" zero-status="1">',_+='           {{#close}}<div title="关闭" zero-close-unique="{{unique}}" class="zeromodal-close"></div>{{/close}}',_+='           {{#max}}<div title="最大化/取消最大化" zero-max-unique="{{unique}}" class="zeromodal-max"></div>{{/max}}',_+='           {{#min}}<div title="最小化/取消最小化" zero-min-unique="{{unique}}" class="zeromodal-min"></div>{{/min}}',_+='           <span zero-title-unique="{{unique}}" class="modal-title">{{#escape}}{{&title}}{{/escape}}{{^escape}}{{title}}{{/escape}}</span>',_+="       </div>",_+='       <div zero-unique-body="{{unique}}" class="zeromodal-body">',_+='           {{#url}}<div class="zeromodal-loading1"></div>{{#iframe}}<iframe zero-unique-frame="{{unique}}" src="{{url}}" class="zeromodal-frame"></iframe>{{/iframe}}{{/url}}',_+="       </div>",_+='       {{#resize}}<div zero-unique-sweep-tee="{{unique}}" class="zeromodal-sweep-tee"></div>{{/resize}}',_+="   </div>";var z='{{#iconDisplay}}{{&iconDisplay}}{{/iconDisplay}}{{^iconDisplay}}<div class="zeromodal-icon {{iconClass}}">{{&iconText}}</div>{{/iconDisplay}}';z+='   <div class="zeromodal-title1">{{&_content}}</div>',z+='   <div class="zeromodal-title2">{{&contentDetail}}</div>';var k={unique:"",title:"",content:"",escape:!0,url:!1,ajaxType:"get",ajaxData:{},iframe:!1,width:"500px",height:"300px",top:t,left:t,transition:!1,opacity:.4,overlay:!0,overlayClose:!1,forbidBodyScroll:!0,forbidBodyScrollClass:t,drag:!0,dragHandle:"top",close:!0,max:!1,min:!1,minPosition:t,resize:!1,resizeAfterFn:t,ok:!1,okTitle:"确定",okFn:!1,cancel:!1,cancelTitle:"关闭",cancelFn:!0,buttonTopLine:!0,buttons:[],esc:!1,containerAppendStyle:t,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1},C=!1,D=1e4,S=1e5,j={},q=0;return e(function(){e("html").addClass("zeromodal-overflow-scroll");var t=e("html").width();e("html").removeClass("zeromodal-overflow-scroll").addClass("zeromodal-overflow-hidden");var a=e("html").width();q=a-t,e("html").removeClass("zeromodal-overflow-scroll").removeClass("zeromodal-overflow-hidden"),e("<style type='text/css'>.zeromodal-scroll-margin{margin-right:"+q+"px;}</style>").appendTo("head")}),x.show=function(t){var i=a(t);return r(i),C=!0,e(window).resize(function(){C&&p(i)}),i.unique},x.close=function(e){i({unique:e}),C=!1,delete j[e]},x.closeAll=function(){e('[role="zeromodal-loading"]').remove(),e(".zeromodal-overlay").remove(),e(".zeromodal-container").each(function(){var a=e(this),r=a.attr("zero-unique-container");if(r!==t&&j[r]!==t){var i=j[r];"function"==typeof i.onCleanup&&i.onCleanup(i),a.remove(),"function"==typeof i.onClosed&&i.onClosed(i),delete j[r]}}),C=!1,y()},x.loading=function(r){var i=a();n(i),S++;var o=e(window).scrollTop()+Math.ceil(e(window).height()/3);if(r===t&&(r=1),1===r){var s='<div role="zeromodal-loading" zero-unique-loading="'+i.unique+'" style="z-index:'+S+";top:"+o+'px;">';s+='      <div style="z-index:'+S+'" class="zero_shape zero_circle"></div><div style="z-index:'+S+'" class="zero_shape zero_rectangle"></div><div style="z-index:'+S+'" class="zero_shape zero_triangle"></div>',s+="  </div>",e("body").append(s)}else if(2===r){var l="zeromodal-loading"+r;e("body").append('<div role="zeromodal-loading" zero-unique-loading="'+i.unique+'" class="'+l+'" style="z-index:'+S+";top:"+o+'px;"></div>')}else if(f([3,4,5,6],r)){var p={};switch(r){case 3:p.className="pacman",p.containerCount=5;break;case 4:p.className="line-scale-pulse-out",p.containerCount=5;break;case 5:p.className="line-spin-fade-loader",p.containerCount=8;break;case 6:p.className="square-spin",p.containerCount=1}for(var s='<div role="zeromodal-loading" zero-unique-loading="'+i.unique+'" class="'+p.className+'" style="z-index:'+D+";left:46%;top:"+o+'px;">',c=0;c<p.containerCount;c++)s+="  <div></div>";s+="  </div>",e("body").append(s)}return i.unique},x.progress=function(r,i,o,s){var l=a();i&&i.width!==t||(l.width="300px"),i&&i.height!==t||(l.height="240px"),n(l);var p=l.width.replace("px",""),c=l.height.replace("px",""),d=e(window).width(),u=e(window).height();p.indexOf("%")!==-1&&(p=d*parseInt(p.replace("%",""))/100),c.indexOf("%")!==-1&&(c=u*parseInt(c.replace("%",""))/100),"string"==typeof p&&(p=parseInt(p)),"string"==typeof c&&(c=parseInt(c));var h=(d-p)/2,f=e(window).scrollTop()+Math.ceil((e(window).height()-c)/3);S++;var m=e('<div zero-unique-loading="'+l.unique+'" class="zeromodal-overlay" style="z-index:'+S+";width:"+p+"px;height:"+c+"px;opacity:0.8;left:"+h+"px;top:"+f+'px;background-color:rgb(36, 37, 37);"></div>');e("body").append(m),S++,r===t&&(r=3),o===t&&(o=1e3);var g={};switch(r){case 3:g.className="pacman",g.containerCount=5;break;case 4:g.className="line-scale-pulse-out",g.containerCount=5;break;case 5:g.className="line-spin-fade-loader",g.containerCount=8;break;case 6:g.className="square-spin",g.containerCount=1}for(var v=i.content||"正在全力加载，请稍候...",y='<div zero-unique-loading="'+l.unique+'" class="'+g.className+'" style="z-index:'+D+';left:41%;top:60px;">',b=0;b<g.containerCount;b++)y+="  <div></div>";y+="  </div>",y+='  <div zero-unique-loading="'+l.unique+'" class="zeromodal-progress-content" style="z-index:'+D+';top:120px;"><span id="progress_content_'+l.unique+'" style="padding: 0px 8px;">'+v+"</span></div>",y+="",m.append(y);var w=0,_=!1,z=setInterval(function(){_||(_=!0,e.ajax({url:i.getProgressUrl+(i.getProgressUrl.indexOf("?")===-1?"?":"&")+"_="+(new Date).getTime(),dataType:"json",type:"get",success:function(a){"object"==typeof a&&a.progress!==t&&null!==a.progress&&("string"==typeof a.progress?(""!==a.progress&&e("#progress_content_"+l.unique).html(a.progress),"finish"!==a.progress&&"error"!==a.progress||(clearInterval(z),""!==i.clearProgressUrl&&e.get(i.clearProgressUrl),x.close(l.unique),s!==t&&s(a.progress))):(e("#progress_content_"+l.unique).html(a.progress.description),a.progress.isFinish===!0&&(clearInterval(z),""!==i.clearProgressUrl&&e.get(i.clearProgressUrl),x.close(l.unique),s!==t&&s(a.progress)))),_=!1}}),w++,w>=500&&(clearInterval(z),x.close(l.unique)),document.getElementById("progress_content_"+l.unique)||clearInterval(z))},o);return l.unique},x.progress_old=function(r){var i=a();n(i),D++;var o=e(window).scrollTop()+Math.ceil(e(window).height()/3),s=e(window).width()/2-200,l=1;r!==t&&r>l&&r<10&&(l=r);var p='<div class="zeromodal-progress" style="top:'+o+"px;left:"+s+"px;z-index:"+D+'">';p+='      <div zeromodal-progress-bar="'+i.unique+'" class="zeromodal-progress-bar" style="width: 0%; background: #92c26a;">',p+='          <span class="zeromodal-progress-icon zeromodal-fa zeromodal-fa-check" style="border-color:#92c26a; color:#92c26a;"><div zeromodal-progress-val="'+i.unique+'" class="zeromodal-progress-val">&nbsp;0%</div></span>',p+="      </div>",p+="  </div>",e("body").append(p);var c=0,d=e('[zeromodal-progress-bar="'+i.unique+'"]'),u=e('[zeromodal-progress-val="'+i.unique+'"]'),h=setInterval(function(){c+=1,d.css("width",c+"%"),u.html((c>9?c:"&nbsp;"+c)+"%"),c>=100&&(u.html('<span class="line tip"></span><span class="line long"></span>'),clearInterval(h))},100*l);return i.unique},x.alert=function(t){var a={iconClass:"show-zero2 zeromodal-icon-info",iconText:"!"},r={};e.extend(r,a),"object"==typeof t?e.extend(r,t):r.content=t,l(r)},x.error=function(t){var a={iconDisplay:'<div class="show-zero2 zeromodal-icon zeromodal-error"><span class="x-mark"><span class="line left"></span><span class="line right"></span></span></div>'};"object"==typeof t?e.extend(a,t):a.content=t,l(a)},x.success=function(t){var a={iconDisplay:'<div class="show-zero2 zeromodal-icon zeromodal-success"><span class="line tip"></span><span class="line long"></span><div class="placeholder"></div></div>'};"object"==typeof t?e.extend(a,t):a.content=t,l(a)},x.confirm=function(t,a){var r={iconClass:"show-zero2 zeromodal-icon-question",iconText:"?"},i={};e.extend(i,r),"function"==typeof a&&(i.okFn=a),i.cancel=!0,"object"==typeof t?e.extend(i,t):i.content=t,l(i)},b.prototype={initialize:function(e,t){this.drag=e,this._x=this._y=0,this._moveDrag=this.bind(this,this.moveDrag),this._stopDrag=this.bind(this,this.stopDrag),this.setOptions(t),this.handle=this.options.handle,this.maxContainer=this.options.maxContainer,this.maxTop=Math.max(this.maxContainer.clientHeight,this.maxContainer.scrollHeight)-this.drag.offsetHeight,this.maxLeft=Math.max(this.maxContainer.clientWidth,this.maxContainer.scrollWidth)-this.drag.offsetWidth,this.limit=this.options.limit,this.lockX=this.options.lockX,this.lockY=this.options.lockY,this.lock=this.options.lock,this.onStart=this.options.onStart,this.onMove=this.options.onMove,this.onStop=this.options.onStop,this.handle.style.cursor="move",this.changeLayout(),this.addHandler(this.handle,"mousedown",this.bind(this,this.startDrag))},changeLayout:function(){this.drag.style.top=this.drag.offsetTop+"px",this.drag.style.left=this.drag.offsetLeft+"px",this.drag.style.position="absolute",this.drag.style.margin="0"},startDrag:function(e){var t=e||window.event;this._x=t.clientX-this.drag.offsetLeft,this._y=t.clientY-this.drag.offsetTop,this.addHandler(document,"mousemove",this._moveDrag),this.addHandler(document,"mouseup",this._stopDrag),t.preventDefault&&t.preventDefault(),this.handle.setCapture&&this.handle.setCapture(),this.onStart()},moveDrag:function(e){var t=e||window.event,a=t.clientY-this._y,r=t.clientX-this._x;this.lock||(this.lockY||(this.drag.style.top=a+"px"),this.lockX||(this.drag.style.left=r+"px"),t.preventDefault&&t.preventDefault(),this.onMove())},stopDrag:function(){this.removeHandler(document,"mousemove",this._moveDrag),this.removeHandler(document,"mouseup",this._stopDrag),this.handle.releaseCapture&&this.handle.releaseCapture(),this.onStop()},setOptions:function(e){this.options={handle:this.drag,limit:!0,lock:!1,lockX:!1,lockY:!1,maxContainer:document.documentElement||document.body,onStart:function(){},onMove:function(){},onStop:function(){}};for(var t in e)this.options[t]=e[t]},addHandler:function(e,t,a){return e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent("on"+t,a)},removeHandler:function(e,t,a){return e.removeEventListener?e.removeEventListener(t,a,!1):e.detachEvent("on"+t,a)},bind:function(e,t){return function(){return t.apply(e,arguments)}}},x}(jQuery));var zeroUploader=function(e){function t(e,t){for(var a in e)for(var r in t)if(a==r&&null!=e[a]){t[r]=e[a];break}}var a=function(e){this.params={id:"",otherValue:"",value:"",title:"",readOnly:!1,rootPath:"",uploadUrl:"/sys/crowdCommon/attr/upload.do",downloadUrl:"/sys/crowdCommon/attr/download.do",removeUrl:"/sys/crowdCommon/attr/remove.do",fileViewNameUrl:"/sys/crowdCommon/attr/getFileViewName.do",allowSuffixs:[],propName:"上传",propExplain:"（请上传附件）",maxSize:41943040,uploadedFunc:null,uploadedFunc_full:null},this.init(e),this.render()};return a.prototype={init:function(e){t(e,this.params)},render:function(){var t="";""!=this.params.value||this.params.readOnly?(t+='<div class="file-upload-container"><a class="file-upload-success" id="down_{{id}}" href="javascript:void(0)" title="下载{{title}}">{{title}}</a>',this.params.readOnly||(t+='<a style="margin-left:5px" href="javascript:void(0)" id="rmv_{{id}}" class="file-upload">删除</a>'),t+='</div><iframe style="display:none" id="ifr_{{id}}"></iframe>'):(t+='<div class="file-upload-container">',t+='<a class="file-upload" href="javascript:void(0)"><input id="f_{{id}}" name="f_{{id}}" type="file">'+this.params.propName+"</a>",t+='<span class="file-upload-info" style="margin-left:5px">{{propExplain}}</span></div>');var a=Mustache.render(t,this.params);this.params.id?e("#"+this.params.id).html(a):e(this.params.otherValue).html(a),this.bindEvent()},setValue:function(t){if(null!=t){var a=this,r=this.params.rootPath+this.params.fileViewNameUrl+"?_="+(new Date).getTime();e.ajax({url:r,cache:!1,dataType:"json",type:"post",data:"wid="+t,success:function(e){a.params.value=t,a.params.title=e.wjxsmc,a.render()}})}},bindEvent:function(){var t=this;e("#f_"+this.params.id).on("change",function(){var a=e(this).val(),r=a.lastIndexOf("."),i=a.substring(r+1).toLowerCase();if(t.checkSize("f_"+t.params.id)){var n=!1;if(0==t.params.allowSuffixs.length)n=!0;else for(var o=0;o<t.params.allowSuffixs.length;o++){var s=t.params.allowSuffixs[o];if(s.toLowerCase()==i){n=!0;break}}if(!n)return void alert("上传的文件格式有误！");var l=t.params.rootPath+t.params.uploadUrl+"?_="+(new Date).getTime(),p=jQuery('<form action="" method="POST" enctype="multipart/form-data"></form>');p.append(e(this)),p.ajaxSubmit({type:"post",dataType:"json",url:l,success:function(e){null!=t.params.uploadedFunc_full?t.params.uploadedFunc_full(e):(t.params.value=e.fileWids,t.params.title=e.fileNames,t.render(),null!=t.params.uploadedFunc&&t.params.uploadedFunc(e))},error:function(e,t,a){console.log(e),console.log(t),console.log(a),alert("上传失败！")}})}}),e("#down_"+this.params.id).on("click",function(){var a=t.params.rootPath+t.params.downloadUrl+"?wid="+t.params.value+"&_="+(new Date).getTime();e("#ifr_"+t.params.id).attr("src",a)}),e("#rmv_"+this.params.id).on("click",function(){var a=t.params.rootPath+t.params.removeUrl+"?_="+(new Date).getTime();e.ajax({url:a,cache:!1,dataType:"json",type:"post",data:"wid="+t.params.value,success:function(e){t.params.value="",t.params.title="",t.render()}})})},checkSize:function(e){var t="您的浏览器暂不支持计算上传文件的大小，建议使用Chrome、FireFox、IE浏览器。",a={},r=window.navigator.userAgent;r.indexOf("MSIE")>=1?a.ie=!0:r.indexOf("Firefox")>=1?a.firefox=!0:r.indexOf("Chrome")>=1&&(a.chrome=!0);var i=document.getElementById(e);if(""==i.value)return alert("请先选择上传文件"),!1;try{var n=0;if(a.firefox||a.chrome)n=i.files[0].size;else{if(!a.ie)return alert(t),!1;var o=document.getElementById("tempimg");o.dynsrc=i.value,n=o.fileSize}if(n==-1)return alert(t),!1;if(n>this.params.maxSize)return alert("文件大小不符合要求!"),!1}catch(e){console.log(e)}return!0}},a}(jQuery);!function(e){"undefined"!=typeof module&&"object"==typeof exports&&define.cmd?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):window.zeroBjSelector=e}(function(e,t){function a(){for(var e=[],t="0123456789abcdef",a=0;a<36;a++)e[a]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="",e.join("")}var r=function(e){this.params={container:"",defaultVal:"",readOnly:!1,loadDataUrl:{debug:"/examples/json/zeroBjSelector-data.json",normal:""},unique:a()},this.result={val:"",display:""},this.init(e)};return r.prototype={init:function(a){var r=this;e.extend(this.params,a);var i="";if(this.params.readOnly!==t&&!this.params.readOnly){i+='   <a id="bjselectorChoice_'+this.params.unique+'" href="javascript:void(0);" class="zero-importer-a">选择</a>';var n=this.params.defaultVal!==t&&""!==this.params.defaultVal?"":"display:none;";i+='<a id="bjselectorClearChoice_'+this.params.unique+'" href="javascript:void(0);" class="zero-importer-a" style="margin-left:4px;'+n+'">清除</a>'}if(i+='<span id="bjselectorViewSpan_'+this.params.unique+'" style="font-size:12px;margin-left:4px"></span>',e(this.params.container).html(i),this.params.defaultVal!==t&&""!==this.params.defaultVal){this.result.val=this.params.defaultVal;var o=window.ZERO_DEBUG_MODE===!0?r.params.loadDataUrl.debug:r.params.loadDataUrl.normal;o+=(o.indexOf("?")!==-1?"&":"?")+"_="+(new Date).getTime(),e.ajax({url:o,dataType:"json",data:"mrz="+r.params.defaultVal,type:window.ZERO_DEBUG_MODE===!0?"get":"post",success:function(t){if(t.datas.ggxxcx_bjxxcx&&t.datas.ggxxcx_bjxxcx.rows&&t.datas.ggxxcx_bjxxcx.rows.length>0){var a=e("#bjselectorViewSpan_"+r.params.unique);a.html(t.datas.ggxxcx_bjxxcx.rows[0].BJMC),a.attr("title",t.datas.ggxxcx_bjxxcx.rows[0].BJMC)}}})}e("#bjselectorChoice_"+this.params.unique).click(function(){r.choice()}),e("#bjselectorClearChoice_"+this.params.unique).click(function(){r.result.val="",r.result.display="",e("#bjselectorViewSpan_"+r.params.unique).html(""),e("#bjselectorViewSpan_"+r.params.unique).removeAttr("title"),e(this).hide()})},choice:function(){var t=this,a='<form id="bjselectorForm">';a+='      <input id="bjselectorVal" name="gjz" class="zero-bj-selector-input" placeHolder="输入班级名称按回车键查询"/><input type="text" style="display:none"/>',a+="   </form>",a+='   <div id="bjselectorGrid" class="zerogrid-container"></div>';var r=zeroModal.show({title:"选择班级",content:a,width:"700px",height:"500px",cancel:!0,onComplete:function(){var a=new zeroGrid({container:"#bjselectorGrid",url:window.ZERO_DEBUG_MODE===!0?t.params.loadDataUrl.debug:t.params.loadDataUrl.normal,columns:[{display:"操作",view:'<a role="choice" role-val="{{WID}}" role-display="{{BJMC}}" href="javascript:void(0);">选择</a>'},{display:"名称",property:"BJMC",sort:"BJMC",width:"35%"},{display:"年级",property:"NJDM_DISPLAY",sort:"NJDM",width:"15%"},{display:"学生类别",property:"XSLBDM_DISPLAY",sort:"XSLBDM",width:"20%"},{display:"院系",property:"YXDM_DISPLAY",sort:"YXDM",width:"20%"}],formId:"bjselectorForm",pageSize:8,parseLoadDataFunc:function(e){var t={total:e.datas.ggxxcx_bjxxcx.totalSize,pageIndex:e.datas.ggxxcx_bjxxcx.pageNumber,pageSize:e.datas.ggxxcx_bjxxcx.pageSize,datas:e.datas.ggxxcx_bjxxcx.rows};return t}});a.render(),e("#bjselectorVal").keyup(function(e){13===e.keyCode&&a.load(1)}),e("#bjselectorGrid").on("click",'a[role="choice"]',function(){var a=e(this);t.result.val=a.attr("role-val"),t.result.display=a.attr("role-display"),e("#bjselectorViewSpan_"+t.params.unique).html(t.result.display),e("#bjselectorViewSpan_"+t.params.unique).attr("title",t.result.display),e("#bjselectorClearChoice_"+t.params.unique).show(),zeroModal.close(r)})}})}},r}(jQuery)),function(e){"undefined"!=typeof module&&"object"==typeof exports&&define.cmd?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):window.zeroDropDownList=e}(function(e,t){function a(){for(var e=[],t="0123456789abcdef",a=0;a<36;a++)e[a]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="",e.join("")}function r(){var e=navigator.userAgent,t=e.indexOf("Opera")>-1,a=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1&&!t,r=e.indexOf("Edge")>-1,i=e.indexOf("Trident")>-1&&e.indexOf("rv:11.0")>-1,n=e.indexOf("Firefox")>-1,o=e.indexOf("Safari")>-1&&e.indexOf("Chrome")==-1,s=e.indexOf("Chrome")>-1&&e.indexOf("Safari")>-1;if(a){var l=new RegExp("MSIE (\\d+\\.\\d+);");l.test(e);var p=parseFloat(RegExp.$1);return 7==p?"IE7":8==p?"IE8":9==p?"IE9":10==p?"IE10":11==p?"IE11":"0"}return n?"FF":t?"Opera":i?"IE11":o?"Safari":r?"Edge":s?"Chrome":""}var i=function(e){this.params={container:"",unique:a(),url:t,postParamFunc:t,parseResultsFunc:t,initValue:t,initValueParamFunc:t,initValueNotFindDataIsTrigerSelectedEvent:!0,viewFunc:function(){return""},resultParmaryKey:t,selectedFunc:t,width:t,height:t,showIcon:!0,iconTop:t,placeholder:"输入关键字查找",readOnly:!1,pageNumber:1,getPageInfoFunc:t,allowSelecedNull:!1},this.originResult={},this.tempResults=[],this.tempLoading=!1,this.tempTotalPageSize=0,this.init(e)},n=r();return i.prototype={init:function(a){e.extend(this.params,a);var r=e(this.params.container),i=this.params.iconTop!==t?this.params.iconTop:"3px";this.params.showIcon&&(r.parent().append('<div id="icon_'+this.params.unique+'" style="border:none; right:3px; top:'+i+'; position:absolute; width:6.14887%; height:26px; background-color: transparent;"><div unselectable="on" class="jqx-icon-arrow-down jqx-icon"></div></div>'),r.parent().find(".bh-table-form-icon").hide()),r.attr("readonly","readonly").attr("zero-isshow","0").addClass("zero-ddl"),this.params.readOnly&&r.css("cursor","not-allowed"),this.bindEvent(),this.params.initValue!==t&&""!==this.params.initValue&&this.initValueFunc()},initValueFunc:function(){var a=this,r={WID:this.params.initValue};if("function"==typeof this.params.initValueParamFunc){var i=this.params.initValueParamFunc(this.params.initValue);i!==t&&(r=i)}e.ajax({url:this.params.url,data:r,dataType:"json",type:"post",success:function(e){var t=e;"function"==typeof a.params.parseResultsFunc&&(t=a.params.parseResultsFunc(e)),t.length>0?a.params.selectedFunc(t[0]):a.params.initValueNotFindDataIsTrigerSelectedEvent&&a.params.selectedFunc("")}})},bindEvent:function(){var t=this;e(this.params.container).click(function(){t.params.readOnly||t.openOrCloseContainer.call(t)}),e("#icon_"+this.params.unique).click(function(){})},openOrCloseContainer:function(){var a=this,r=e(this.params.container),i=r.attr("zero-isshow");if("1"===i)e("#keyword_"+a.params.unique).animate({height:"0px"}),setTimeout(function(){e("#keyword_"+a.params.unique).remove()},300),r.attr("zero-isshow","0");else{var o=r.width()+26+"px";a.params.width!==t&&(o="function"==typeof a.params.width?a.params.width():a.params.width);var s=a.params.placeholder!==t?a.params.placeholder:"",l='<div id="keyword_'+a.params.unique+'" class="zero-ddl-container" style="width:'+o+'">';l+='      <input id="keyword_input_'+a.params.unique+'" placeholder="'+s+'" class="jqx-widget jqx-listbox-filter-input jqx-input jqx-rc-all zero-ddl-keyword" />',l+='      <div id="zero_content_'+a.params.unique+'" style="margin-top:26px">',l+="      </div>",l+="   </div>",r.after(l),e("#keyword_"+a.params.unique).animate({height:a.params.height!==t?a.params.height:"200px",scrollTop:" 0"}),n.indexOf("IE")===-1?e("#keyword_input_"+a.params.unique).focus():WIS_EMAP_INPUT.placeHolder("#keyword_input_"+a.params.unique),r.attr("zero-isshow","1"),a.loadDatas(),a.bindLoadDatasAfterEvent(),"Edge"===n?e("#keyword_input_"+a.params.unique).bind("input",function(){a.params.pageNumber=1,a.loadDatas()}):e("#keyword_input_"+a.params.unique).keyup(function(){a.params.pageNumber=1,a.loadDatas()})}},bindLoadDatasAfterEvent:function(){var t=this,a=e(this.params.container);e("#keyword_"+t.params.unique).on("click",'div[role="zero-ddl-item"]',function(){var r=e(this).attr("role-val");if(""===r)t.params.selectedFunc("");else for(var i=0;i<t.tempResults.length;i++)if(t.tempResults[i][t.params.resultParmaryKey]===r){"function"==typeof t.params.selectedFunc&&t.params.selectedFunc(t.tempResults[i]);break}e("#keyword_"+t.params.unique).animate({height:"0px"}),setTimeout(function(){e("#keyword_"+t.params.unique).remove(),a.attr("zero-isshow","0")},300)}),e("#keyword_"+t.params.unique).on("click",'a[role="pageUp"]',function(e){t.params.pageNumber>1&&(t.params.pageNumber--,t.loadDatas()),e.stopPropagation(),e.preventDefault()}),e("#keyword_"+t.params.unique).on("click",'a[role="pageDown"]',function(e){t.params.pageNumber+1<=t.tempTotalPageSize&&(t.params.pageNumber++,t.loadDatas()),e.stopPropagation(),e.preventDefault()})},loadDatas:function(){var a=this,r=e("#keyword_input_"+this.params.unique).val()||"",i=e.extend({pageSize:10,pageNumber:a.params.pageNumber},this.params.postParamFunc!==t?this.params.postParamFunc(r):{});this.tempLoading||(this.tempLoading=!0,e("#zero_content_"+this.params.unique).html('<div style="padding-left: 4px; color: #bbb;">Loading...</div>'),e.ajax({url:this.params.url,data:i,dataType:"json",type:"post",success:function(e){a.tempLoading=!1;var t=e;return"function"==typeof a.params.parseResultsFunc&&(t=a.params.parseResultsFunc(e)),0===t.length&&1!==a.params.pageNumber?(a.params.pageNumber=1,void a.loadDatas()):(a.originResult=e,a.tempResults=t,void a.renderItems(r))}}))},renderItems:function(a){var r="";if(0===this.tempResults.length)r+='<div style="padding-left: 4px; color: #bbb;">没有数据显示！</div>';else{this.params.allowSelecedNull===!0&&(r+='<div class="zero-ddl-item" role="zero-ddl-item" role-val="">请选择...</div>');
for(var i=0;i<this.tempResults.length;i++){var n=this.params.viewFunc(this.tempResults[i]),o=n;a!==t&&""!==a&&(o=o.replace(new RegExp(a,"gm"),'<font color="red">'+a+"</font>")),r+='<div class="zero-ddl-item" role="zero-ddl-item" role-val="'+this.tempResults[i][this.params.resultParmaryKey]+'">'+o+"</div>"}if("function"==typeof this.params.getPageInfoFunc){var s=this.params.getPageInfoFunc(this.originResult);this.tempTotalPageSize=Math.ceil(s.totalSize/s.pageSize),r+='<div style="float:right;padding-right:8px;">',r+='  <span class="bh-color-grey-2">共'+s.totalSize+"条数据&nbsp;"+this.params.pageNumber+"/"+this.tempTotalPageSize+"</span>",r+='  <a role="pageUp" href="javascript:void(0);">上页</a>&nbsp;',r+='  <a role="pageDown" href="javascript:void(0);">下页</a>',r+="</div>"}}e("#zero_content_"+this.params.unique).html(r)}},e(document).on("click",function(t){var a=e(t.target);a.hasClass("zero-ddl")||a.hasClass("zero-ddl-keyword")||a.hasClass("zero-ddl-multiple")||(e(".zero-ddl-container").remove(),e(".zero-ddl").attr("zero-isshow","0"))}),i}(jQuery)),function(e){"undefined"!=typeof module&&"object"==typeof exports&&define.cmd?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):window.zeroDsSelector=e}(function(e,t){function a(){for(var e=[],t="0123456789abcdef",a=0;a<36;a++)e[a]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="",e.join("")}function r(e,a){return e===t||null===e||""===e?"":a===t||null===a||""===a?e:e.replace(new RegExp(a,"gm"),'<font color="red">'+a+"</font>")}var i=function(e){this.params={container:"",defaultVal:"",readOnly:!1,loadDataUrl:{debug:"/examples/json/zeroDsSelector-data.json",normal:""},unique:a(),clickChoiceBeforeListener:t,clickChoiceAfterListener:t},this.result={val:"",display:""},this.init(e)};return i.prototype={init:function(a){var r=this;e.extend(this.params,a);var i="";if(this.params.readOnly!==t&&!this.params.readOnly){i+='   <a id="dsselectorChoice_'+this.params.unique+'" href="javascript:void(0);" class="zero-importer-a">选择</a>';var n=this.params.defaultVal!==t&&""!==this.params.defaultVal?"":"display:none;";i+='<a id="dsselectorClearChoice_'+this.params.unique+'" href="javascript:void(0);" class="zero-importer-a" style="margin-left:4px;'+n+'">清除</a>'}if(i+='<span id="dsselectorViewSpan_'+this.params.unique+'" style="font-size:12px;margin-left:4px"></span>',e(this.params.container).html(i),this.params.defaultVal!==t&&""!==this.params.defaultVal){this.result.val=this.params.defaultVal;var o=window.ZERO_DEBUG_MODE===!0?r.params.loadDataUrl.debug:r.params.loadDataUrl.normal;o+=(o.indexOf("?")!==-1?"&":"?")+"_="+(new Date).getTime(),e.ajax({url:o,dataType:"json",data:"mrz="+r.params.defaultVal,type:window.ZERO_DEBUG_MODE===!0?"get":"post",success:function(t){t.datas.ggxxcx_dsxxcx&&t.datas.ggxxcx_dsxxcx.rows&&t.datas.ggxxcx_dsxxcx.rows.length>0&&(e("#dsselectorViewSpan_"+r.params.unique).html(t.datas.ggxxcx_dsxxcx.rows[0].XM),e("#dsselectorViewSpan_"+r.params.unique).attr("title",t.datas.ggxxcx_dsxxcx.rows[0].XM))}})}e("#dsselectorChoice_"+this.params.unique).click(function(){r.choice()}),e("#dsselectorClearChoice_"+this.params.unique).click(function(){r.result.val="",r.result.display="",e("#dsselectorViewSpan_"+r.params.unique).html(""),e("#dsselectorViewSpan_"+r.params.unique).removeAttr("title"),e(this).hide()})},choice:function(){var a=this,i=zeroModal.show({title:"选择导师",content:'<div><form id="dsselectorForm" style="margin-bottom: 10px;"><input id="dsselectorVal" name="gjz" class="zero-ds-selector-input" placeHolder="输入工号或姓名按回车键查询"/><input type="text" style="display:none"/></form></div><div id="dsselectorGrid" class="zerogrid-container"></div>',width:"700px",height:"500px",cancel:!0,onComplete:function(){var n=new zeroGrid({container:"#dsselectorGrid",url:window.ZERO_DEBUG_MODE===!0?a.params.loadDataUrl.debug:a.params.loadDataUrl.normal,columns:[{display:"操作",view:'<a role="choice" role-val="{{WID}}" role-display="{{XM}}" href="javascript:void(0);">选择</a>'},{display:"工号",property:"DSBH",sort:"DSBH",width:"20%",view:function(t){return r(t.DSBH,e("#dsselectorVal").val())}},{display:"姓名",property:"XM",sort:"XM",width:"20%",view:function(t){return r(t.XM,e("#dsselectorVal").val())}},{display:"所在单位",property:"SZYX_DISPLAY",sort:"SZYX",width:"30%"},{display:"职称",property:"ZC_DISPLAY",sort:"ZC_DISPLAY",width:"20%"}],formId:"dsselectorForm",pageSize:8,parseLoadDataFunc:function(e){var t={total:e.datas.ggxxcx_dsxxcx.totalSize,pageIndex:e.datas.ggxxcx_dsxxcx.pageNumber,pageSize:e.datas.ggxxcx_dsxxcx.pageSize,datas:e.datas.ggxxcx_dsxxcx.rows};return t}});n.render(),e("#dsselectorVal").keyup(function(e){13===e.keyCode&&n.load(1)}),e("#dsselectorGrid").on("click",'a[role="choice"]',function(){var r=e(this);if(a.result.val=r.attr("role-val"),a.result.display=r.attr("role-display"),"function"==typeof a.params.clickChoiceBeforeListener){var o=a.params.clickChoiceBeforeListener(a.result);if(o!==t&&o===!1)return}e("#dsselectorViewSpan_"+a.params.unique).html(a.result.display),e("#dsselectorViewSpan_"+a.params.unique).attr("title",a.result.display),e("#dsselectorClearChoice_"+a.params.unique).show(),zeroModal.close(i);var s=n.getDatasByProperty(a.result.val,"WID");"function"==typeof a.params.clickChoiceAfterListener&&a.params.clickChoiceAfterListener(s[0])})}})}},i}(jQuery)),function(e){"undefined"!=typeof module&&"object"==typeof exports&&define.cmd?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):window.zeroEmapGrid=e}(function(e,t){function a(){for(var e=[],t="0123456789abcdef",a=0;a<36;a++)e[a]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="",e.join("")}function r(e,a){var r=a[e],i=a[e+"_DISPLAY"];return i!==t&&null!==i&&""!==i?i:r!==t&&null!==r&&""!==r?r:""}function i(e,a){var r=/(\\)?\{{([^\{\}\\]+)(\\)?\}}/g;return e.replace(r,function(e,r,i,n){if(r||n)return e.replace("\\","");var o,s,l=i.replace(/\s/g,"").split("."),p=a;for(o=0;o<l.length;o++)if(s=l[o],p=p[s],p===t||null===p)return"";return p})}function n(e,a,r){for(var i=[],n=(a-1)*r;n<a*r;n++)e[n]!==t&&i.push(e[n]);return i}function o(t,a){var r="";return t instanceof String||t instanceof Number||t instanceof Boolean?r+="&"+a+"="+encodeURIComponent(t):e.each(t,function(e){var i=null==a?e:a+(t instanceof Array?"["+e+"]":"."+e);r+="&"+o(this,i)}),r.substr(1)}function s(e){if(e instanceof Array){for(var t=[],a=0;a<e.length;++a)t[a]=s(e[a]);return t}if(e instanceof Object){var t={};for(var a in e)t[a]=s(e[a]);return t}return e}var l=function(e){this.params={container:".zerogrid-container",columns:[],url:"",pageIndex:1,pageSize:20,pagination:!0,paginationStyle:"full",checkboxProperty:t,checkboxPropertyFunc:t,checkboxPropertyTitle:t,checkboxCheckedFunc:t,radioboxProperty:t,radioboxPropertyFunc:t,tHeadTrAppendAttr:t,formId:"",loadBeforeListener:t,loadAfterListener:t,renderBeforeListener:t,renderAfterListener:t,unique:a(),datas:[],parseLoadDataFunc:t,loadDataAppendDataFunc:t,fontSize:t,titleFixed:!1,titleFixedDistance:0,titleFixedTop:"0px",defaultNotQuery:!1},this.tempData={pageTotalSize:1,sortField:"",sortOrder:"",isloading:!1,datas:[]},this.init(e)};return l.prototype={init:function(t){e.extend(this.params,t),"undefined"!=typeof this.params.url&&""!==this.params.url||"undefined"!=typeof this.params.datas&&(this.tempData.datas=this.params.datas)},render:function(){this.params.renderBeforeListener!==t&&this.params.renderBeforeListener(this.params),this.renderTable(),this.params.renderAfterListener!==t&&this.params.renderAfterListener(this.params),this.params.defaultNotQuery||this.load()},renderTable:function(){var a='<div id="waitDiv_{{unique}}" class="ui_grid_loading"></div>';a+='   <table class="zero-grid zero-grid-hover bh-bColor-info-3" id="table_{{unique}}" table-unique="{{unique}}" {{#fontSize}}style="font-size:{{fontSize}}"{{/fontSize}}>',a+='       <thead role="thead_{{unique}}"><tr '+(this.params.tHeadTrAppendAttr!==t?this.params.tHeadTrAppendAttr:"")+">","undefined"==typeof this.params.checkboxProperty&&"undefined"==typeof this.params.radioboxProperty||(a+='       <th class="bh-bg-info-5 bh-bColor-info-3" style="text-align:center;padding-left:0;{{^checkboxPropertyTitle}}width:34px;{{/checkboxPropertyTitle}}">',a+="       {{#checkboxProperty}}",a+='           <div class="bh-checkbox" style="width:32px;padding-top:0"><label style="padding: 0 6px 0 10px;"><input type="checkbox" id="checkboxAll_{{unique}}"><i class="bh-choice-helper" style="position:static;margin-right:0;"></i></label></div>',a+="       {{/checkboxProperty}}",a+="       </th>"),a+="{{#columns}}",a+='   <th class="bh-bg-info-5 bh-bColor-info-3" {{#minwidth}}style="min-width:{{minwidth}}"{{/minwidth}} {{#width}}style="width:{{width}}"{{/width}} title="{{display}}">',a+='       {{#sort}} <a class="ui_grid_sort_default" role="sort" sort="{{sort}}">{{display}}</a> {{/sort}}',a+="       {{^sort}} {{display}} {{/sort}}",a+="   </th>",a+="{{/columns}}",a+="       </tr></thead>",a+='       <tbody id="tbody_{{unique}}" style="font-size:12px;"></tbody>',a+="   </table>",a+='   <div id="pagination_{{unique}}" class="zero-grid-pagination-d"></div>',a+='   <div id="fixTblDiv_{{unique}}"></div>',e(this.params.container).html(Mustache.render(a,this.params)),this.bindTableEvent()},load:function(a,r){if(!this.loading){a!==t&&(this.params.pageIndex=a);var i=this;if(this.params.loadBeforeListener!==t){var s=this.params.loadBeforeListener();if(s!==t&&null!==s&&s===!1)return}if(this.loading=!0,this.openWaitDiv(),this.resetCheckboxStatus(),"undefined"!=typeof this.params.url&&""!==this.params.url){var l="";if("undefined"!=typeof this.params.formId&&(l+=e("#"+this.params.formId).serialize()),"function"==typeof this.params.loadDataAppendDataFunc){var p=this.params.loadDataAppendDataFunc();p!==t&&(l+="&"+o(p))}l+="&pageNumber="+this.params.pageIndex+"&pageSize="+this.params.pageSize,null!==this.tempData.sortField&&""!==this.tempData.sortField&&(l+="&*order="+("desc"===this.tempData.sortOrder?"-":encodeURIComponent("+"))+this.tempData.sortField),r!==t&&(l+="&"+_params);var c=new Date;e.ajax({url:this.params.url+(this.params.url.indexOf("?")!==-1?"&":"?")+"_="+(new Date).getTime(),dataType:"json",data:l,type:window.ZERO_DEBUG_MODE===!0?"get":"post",error:function(){console.log("数据加载异常！请检查是否登录超时。")},success:function(e){var t=new Date;console.log("~~ 数据查询花费："+parseInt(t-c)+"ms");var a=e;"undefined"!=typeof i.params.parseLoadDataFunc&&(a=i.params.parseLoadDataFunc(e)),a.pageIndex=parseInt(a.pageIndex),a.pageSize=parseInt(a.pageSize),a.total=parseInt(a.total),i.tempData.datas=a.datas,i.renderData(a)}})}else{var d={total:this.tempData.datas.length,pageIndex:this.params.pageIndex,pageSize:this.params.pageSize,datas:this.params.pagination?n(this.tempData.datas,this.params.pageIndex,this.params.pageSize):this.tempData.datas};this.renderData(d)}}},renderData:function(a){var n=new Date,o="";if(a.datas.length>0)for(var l=0;l<a.datas.length;l++){o+="<tr>","undefined"!=typeof this.params.checkboxProperty?(o+='<td class="bh-bColor-info-3" style="text-align:center;padding-left:0">',("undefined"==typeof this.params.checkboxPropertyFunc||this.params.checkboxPropertyFunc(a.datas[l]))&&(o+='<div class="bh-checkbox" style="width:32px;padding-top:0"><label style="padding: 0 6px 0 10px;">',o+='<input type="checkbox" name="box_'+this.params.unique+'" id="box_'+l+'" value="'+r(this.params.checkboxProperty,a.datas[l])+'"><i class="bh-choice-helper" style="position:static;margin-right:0;"></i>',o+="</label></div>"),o+="</td>"):"undefined"!=typeof this.params.radioboxProperty&&(o+='<td class="bh-bColor-info-3" style="text-align:center;padding-left:0">',("undefined"==typeof this.params.radioboxPropertyFunc||this.params.radioboxPropertyFunc(a.datas[l]))&&(o+='<div class="bh-radio"><label style="padding: 0 8px 0 12px;">',o+='<input type="radio" id="rdo_'+l+'" name="box_'+this.params.unique+'" value="'+r(this.params.radioboxProperty,a.datas[l])+'">',o+='<i class="bh-choice-helper" style="position:static;margin-right:0;"></i></label></div>'),o+="</td>");for(var p=0;p<this.params.columns.length;p++){var c=this.params.columns[p];o+="<td"+(c.append!==t?" "+c.append:""),o+=(this.params.fontSize!==t?' style="font-size:'+this.params.fontSize+'"':"")+' class="bh-bColor-info-3">';var d="";if(c.view!==t)if("function"==typeof c.view)d=c.view(a.datas[l],p);else{var u=s(a.datas[l]);u.index=l,d=i(c.view,u)}else d=r(c.property,a.datas[l]);o+=d+"</td>"}}else{var h=this.params.columns.length+(this.hasBox()?1:0);o+='<tr><td class="bh-bColor-info-3" style="text-align:center;" colspan="'+h+'">没有数据显示！</td></tr>'}if(e("#tbody_"+this.params.unique).html(o),this.params.pagination){if(this.tempData.pageTotalSize=Math.ceil(a.total/a.pageSize),isNaN(this.tempData.pageTotalSize))return;for(var f=[],m=5*Math.floor((a.pageIndex-1)/5),l=1;l<=5;l++){var g=m++ +1;g<=this.tempData.pageTotalSize&&f.push(g)}var v="<div>";v+='      <a class="zero-grid-pagination-a" title="Go最前页" role="goFirstPage" href="javascript:void(0)">««</a>',v+='      <a class="zero-grid-pagination-a" title="Go上一页" role="goPreviousPage" href="javascript:void(0)">«</a>';for(var l=0;l<f.length;l++){var y="bh-color-primary";f[l]==a.pageIndex&&(y="bh-bg-primary bh-color-primary-5 bh-bColor-primary"),v+='  <a class="zero-grid-pagination-a '+y+'" href="javascript:void(0)" role="goPageIndex" pageindex="'+f[l]+'" title="Go第'+f[l]+'页">'+f[l]+"</a>"}v+='      <a class="zero-grid-pagination-a" title="Go下一页" role="goNextPage" href="javascript:void(0)">»</a>',v+='      <a class="zero-grid-pagination-a" title="Go最后页" role="goLastPage" href="javascript:void(0)">»»</a>',"full"===this.params.paginationStyle?(v+='  <span class="zero-grid-pagination-des">共'+a.total+"条数据，分"+this.tempData.pageTotalSize+"页显示，",v+=this.buildPageSizeSelect()+"</span>"):"short"===this.params.paginationStyle&&(v+='  <span class="zero-grid-pagination-des">共'+a.total+"条数据。</span>"),e("#pagination_"+this.params.unique).html(v)}this.bindLoadEvent(),this.closeWaitDiv(),this.autoSetTitleFixWidth();var b=new Date;console.log("~~ 渲染数据及绑定事件花费："+parseInt(b-n)+"ms"),this.params.loadAfterListener!==t&&this.params.loadAfterListener(a),this.loading=!1},buildPageSizeSelect:function(){var e=this.params.pageSize,t='每页显示<select role="goPageSize" class="zero-grid-pagination-pz">';return t+='<option value="6" '+(6==e?"selected=selected":"")+">6</option>",t+='<option value="10" '+(10==e?"selected=selected":"")+">10</option>",t+='<option value="20" '+(20==e?"selected=selected":"")+">20</option>",t+='<option value="30" '+(30==e?"selected=selected":"")+">30</option>",t+='<option value="40" '+(40==e?"selected=selected":"")+">40</option>",t+='<option value="50" '+(50==e?"selected=selected":"")+">50</option>",t+='<option value="100" '+(100==e?"selected=selected":"")+">100</option>",t+="</select>条数据。"},openWaitDiv:function(){var t=e("#waitDiv_"+this.params.unique),a=(e("#table_"+this.params.unique).position().left,e("#table_"+this.params.unique).position().top,e("#table_"+this.params.unique).width()),r=e("#table_"+this.params.unique).height();t.css({position:"absolute",width:a,height:r,display:"block"})},closeWaitDiv:function(){e("#waitDiv_"+this.params.unique).css({display:"none"})},bindTableEvent:function(){var a=this;e("#checkboxAll_"+this.params.unique).click(function(){for(var e=this.checked,r=document.getElementsByName("box_"+a.params.unique),i=0;i<r.length;i++)r[i].disabled||(r[i].checked=e);a.params.checkboxCheckedFunc!==t&&a.params.checkboxCheckedFunc()}),e("#table_"+this.params.unique).on("click","td",function(){}),this.params.titleFixed===!0&&e(window).scroll(function(r){var i=e("#table_"+a.params.unique);if(0!==i.length){var n=i.offset().top-e(window).scrollTop();if(n<=a.params.titleFixedDistance){if(document.getElementById("table_fixed_"+a.params.unique))e("#table_fixed_"+a.params.unique).show();else{var o={unique:a.params.unique,top:a.params.titleFixedTop,width:i.width()+"px",left:i.offset().left+"px",fontSize:a.params.fontSize!==t?a.params.fontSize:"12px"},s='  <table class="zero-grid zero-grid-hover" id="table_fixed_{{unique}}" style="position:fixed;z-index:1000;width:{{width}};top:{{top}};left:{{left}};text-align:center;font-size:{{fontSize}}">';s+=e("#table_"+a.params.unique+" thead").html(),s+="      </table>",e("#fixTblDiv_"+a.params.unique).append(Mustache.render(s,o)),a.params.checkboxProperty!==t&&e("#table_fixed_"+a.params.unique).find('[class="bh-checkbox"]').remove()}a.autoSetTitleFixWidth()}else e("#table_fixed_"+a.params.unique).hide()}})},autoSetTitleFixWidth:function(){var t=this;if(this.params.titleFixed){var a=e("#table_fixed_"+this.params.unique);if(0!==a.length){var r=[];e("#table_"+t.params.unique+' [role="thead_'+t.params.unique+'"] th').each(function(t){var a=e(this);r.push({width:e(this).width()+1+"px",text:a.text()})}),e("#table_fixed_"+t.params.unique+" th").each(function(t){e(this).css("width",r[t].width).css("min-width",r[t].width).css("max-width",r[t].width).html(r[t].text)})}}},bindLoadEvent:function(){var a=this,r=e(this.params.container);r.find("a[role='goFirstPage']").click(function(){0!==a.tempData.pageTotalSize&&(a.params.pageIndex=1,a.load())}),r.find("a[role='goPreviousPage']").click(function(){if(0!==a.tempData.pageTotalSize){var e=a.params.pageIndex-1;e<=0&&(e=1),a.params.pageIndex=e,a.load()}}),r.find("a[role='goNextPage']").click(function(){if(0!==a.tempData.pageTotalSize){var e=a.params.pageIndex+1;e>a.tempData.pageTotalSize&&(e=a.tempData.pageTotalSize),a.params.pageIndex=e,a.load()}}),r.find("a[role='goLastPage']").click(function(){0!==a.tempData.pageTotalSize&&(a.params.pageIndex=a.tempData.pageTotalSize,a.load())}),r.find("a[role='goPageIndex']").click(function(){0!==a.tempData.pageTotalSize&&(a.params.pageIndex=parseInt(e(this).attr("pageindex")),a.load())}),r.find("select[role='goPageSize']").change(function(){a.params.pageSize=parseInt(this.value),a.params.pageIndex=1,a.load()}),r.find("a[role='sort']").unbind("click"),r.find("a[role='sort']").click(function(){a.resetSortClass();var r=e(this).attr("sort");e(this).removeClass(),a.tempData.sortField===r?a.tempData.sortOrder===t||""===a.tempData.sortOrder?(a.tempData.sortOrder="asc",e(this).addClass("ui_grid_sort_asc")):"asc"===a.tempData.sortOrder?(a.tempData.sortOrder="desc",e(this).addClass("ui_grid_sort_desc")):(a.tempData.sortOrder="asc",e(this).addClass("ui_grid_sort_asc")):(a.tempData.sortOrder="asc",e(this).addClass("ui_grid_sort_asc")),a.tempData.sortField=r,a.params.pageIndex=1,a.load()})},resetCheckboxStatus:function(){e("#checkboxAll_"+this.params.unique).attr("checked",!1)},hasBox:function(){return this.params.checkboxProperty!==t||this.params.radioboxProperty!==t},resetSortClass:function(){e("#table_"+this.params.unique).find("a[role='sort']").each(function(t){e(this).removeClass(),e(this).addClass("ui_grid_sort_default")})},getSelectedVal:function(){for(var e="",t=document.getElementsByName("box_"+this.params.unique),a=0;a<t.length;a++){var r=t[a];r.checked&&(""!==e&&(e+=","),e+=r.value)}return e},getDatas:function(){return this.tempData.datas},setDatas:function(e){this.datas=e,this.tempData.datas=e},getDatasByProperty:function(e,t){for(var a=[],i=e.split(","),n=0;n<i.length;n++)for(var o=0;o<this.tempData.datas.length;o++){var s=r(t,this.tempData.datas[o]);if(s===i[n]){a.push(this.tempData.datas[o]);break}}return a}},l}(jQuery)),function(e){"undefined"!=typeof module&&"object"==typeof exports&&define.cmd?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):window.zeroExporter=e}(function(e,t){function a(a){var r={};return e.extend(r,D),e.extend(r,a),r.filename!==t&&null!==r.filename&&(r.filename+="_"+v("yyyyMMdd")),r}function r(e,a){for(var r=0;r<a.length;r++){var i=a[r];e[i]!==t&&""!==e[i]||console.warn("参数“"+i+"”不能为空!")}}function i(a){w!==t&&zeroModal.close(w),w=zeroModal.show({title:'<span class="zero-exporter-modaltitle">请选择需要导出的格式</span>',content:'<div id="zeroExporterContainer"></div>',width:"690px",height:"400px"});var r="<div>";r+='       <div class="zero-exporter-button-3d zero-exporter-panel zero-exporter-panel-info zero-exporter-panel-alt" data-type="excel">',r+='           <div class="zero-exporter-panel-heading zero-exporter-text-center"><div class="zero-exporter-excel"></div></div>',r+='           <div class="zero-exporter-panel-body zero-exporter-text-center"><h3 class="zero-exporter-body-h3">导出excel</h3></div>',r+="       </div>",r+='       <div class="zero-exporter-button-3d zero-exporter-panel zero-exporter-panel-warning zero-exporter-panel-alt" data-type="dbf">',r+='           <div class="zero-exporter-panel-heading zero-exporter-text-center"><div class="zero-exporter-dbf"></div></div>',r+='           <div class="zero-exporter-panel-body zero-exporter-text-center"><h3 class="zero-exporter-body-h3">导出dbf</h3></div>',r+="       </div>",r+="   </div>",e("#zeroExporterContainer").html(r),e(".zero-exporter-panel").click(function(){n(a,e(this).attr("data-type"))})}function n(a,r,i){w!==t&&zeroModal.close(w),w=zeroModal.show({title:"导出 "+r+' <div class="introjs-help" title="Ask for Help"></div>',content:'<div id="zeroExporterContainer"></div>',width:"690px",height:"400px",max:!0,buttons:[{className:"zeromodal-btn zeromodal-btn-default",name:"返回上一步",attr:'id="backBtn"'},{className:"zeromodal-btn zeromodal-btn-default",name:"保存新的方案",attr:'id="saveDcfaBtn" data-step="3" data-position="top" data-intro="可以保存当前设置的导出方案，以便下次导出"'},{className:"zeromodal-btn zeromodal-btn-primary",name:"开始导出",attr:'id="exportBtn" data-step="5" data-position="top" data-intro="点击开始导出"'}]}),e("#backBtn").before('<span style="float:left;padding-left:16px;line-height:32px;" class="bh-color-info-2">说明：单次导出的上限为40000条数据。</span>');var n="<div>";n+='       <input type="hidden" id="exportType" value="'+r+'" />',n+='       <select id="zeroExporterDcfaSelect" class="zero-exporter-select" data-step="1" data-intro="根据您的需要选择对应的方案"><option value="">默认方案</option></select>&nbsp;&nbsp;',n+='       <a id="removeDsfaBtn" href="javascript:void(0)" class="zero-exporter-a" data-step="4" data-position="right" data-intro="移除废弃的方案">移除方案</a>',n+='       <input id="zeroExporterFilterInput" placeholder="输入关键词按“回车”查询" class="zero-exporter-select" maxlength="40" style="width:154px; margin-right:1px; float:right;"/>',n+='       <div id="zeroExporterDataContainer" style="margin-top:8px"></div>',n+="   </div>",e("#zeroExporterContainer").html(n),e("#zeroExporterDcfaSelect").change(function(){l(a)}),_=new zeroGrid({container:"#zeroExporterDataContainer",unique:"exporter",pagination:!1,checkboxProperty:"name",tHeadTrAppendAttr:'data-step="2" data-position="top" data-intro="在这里可以选择你需要导出的字段及设置导出字段名"',columns:[{display:"字段中文名",property:"display"},{display:"字段名",property:"name",width:"25%",view:function(e){return'<span zdm="'+(e.name||"")+'">'+(e.name||"")+"</span>"}},{display:"导出显示名",width:"25%",view:'<input role-name="{{name}}" role-display="{{display}}" value="{{zdmxsz}}" class="zero-exporter-text" />'},{display:"操作",width:"12%",append:'style="text-align:center" ',view:'<div role-move="up" role-index="{{index}}" class="zero-exporter-arrow1" title="上移">⇧</div>&nbsp;<div role-move="down" role-index="{{index}}" class="zero-exporter-arrow2" title="下移">⇩</div>'}],datas:[],loadAfterListener:function(){"dbf"===r&&e("#table_exporter .zero-exporter-text").attr("maxlength",10)}}),_.render(),o(a,r),s(_,r),e.ajax({url:window.ZERO_DEBUG_MODE?a.loadDataUrl.debug:a.loadDataUrl.normal,dataType:"json",type:window.ZERO_DEBUG_MODE?"get":"post",data:d(a,r),success:function(a){x=a;var r=e("#zeroExporterDcfaSelect");r.empty(),r.append('<option value="">默认方案</option>');for(var n=0;n<a.dcfas.length;n++){var o=a.dcfas[n];r.append('<option value="'+o.WID+'" title="'+o.MC+'" '+(i!==t&&i===o.WID?"selected=selected":"")+">"+o.MC+"</option>")}e("#zeroExporterDcfaSelect").change()}})}function o(a,r){e(".introjs-help").click(function(){introJs().start()}),e("#zeroExporterFilterInput").keyup(function(t){if(13===t.keyCode){var a=g(e(this).val()||"");if(""===a)e("#table_exporter>tbody>tr").show();else{e("#table_exporter>tbody>tr").hide();for(var r=0;r<_.tempData.datas.length;r++)g(_.tempData.datas[r].name).indexOf(a)===-1&&g(_.tempData.datas[r].display).indexOf(a)===-1||e('[zdm="'+_.tempData.datas[r].name+'"]').parent().parent().show()}}}),e("#removeDsfaBtn").click(function(){return""===e("#zeroExporterDcfaSelect").val()?void BH_UTILS.bhDialogDanger({title:"默认方案不能删除！",buttons:[{text:"确定",callback:function(){}}]}):void BH_UTILS.bhDialogWarning({title:"确认删除当前的方案？",buttons:[{text:"确定",callback:function(){e.ajax({url:window.ZERO_DEBUG_MODE?a.removeDcfaUrl.debug:a.removeDcfaUrl.normal,dataType:"json",type:window.ZERO_DEBUG_MODE?"get":"post",data:d(a,r,{wid:e("#zeroExporterDcfaSelect").val()}),success:function(e){return 1!==e.success?(BH_UTILS.bhDialogDanger({title:"删除失败！",content:"不能删除其他人创建的方案",buttons:[{text:"确定",callback:function(){}}]}),!1):(n(a,r),void BH_UTILS.bhDialogSuccess({title:"删除成功！",callback:function(){}}))}})}},{text:"取消",callback:function(){}}]})}),e("#backBtn").click(function(){i(a)}),e("#saveDcfaBtn").click(function(){var t=u();if(""===t.zdm)return void BH_UTILS.bhDialogDanger({title:"无法保存！",content:"别逗我，至少也要选择一个字段吧 (￢_￢)",buttons:[{text:"确定",callback:function(){}}]});if("dbf"===r){var i=f(t.zdmxsz.split(","));if(""!==i)return void BH_UTILS.bhDialogDanger({title:"无法保存！",content:"导出显示名不能有重复（"+i+"）",buttons:[{text:"确定",callback:function(){}}]})}var o='<input id="newFamc" maxlength="30" class="zero-exporter-text" placeholder="新的方案名称" />';"xx"===a.dataRoleId?(o+='<span class="check_box" style="margin-top:8px">',o+='   <input class="box_hidden" checked type="checkbox" id="chk_sfgk" value="1">',o+='   <label for="chk_sfgk"></label><span>公共方案</span>',o+="</span>"):o+='<input class="box_hidden" style="display:none;" type="checkbox" id="chk_sfgk" value="1">';zeroModal.show({title:"请输入方案名称",content:o,width:"260px",height:"190px",ok:!0,cancel:!0,okFn:function(){return""===e.trim(e("#newFamc").val())?(e("#newFamc").focus(),!1):(t.mc=e.trim(e("#newFamc").val()),t.sfgk=document.getElementById("chk_sfgk").checked?1:0,void e.ajax({url:window.ZERO_DEBUG_MODE?a.saveDcfaUrl.debug:a.saveDcfaUrl.normal,dataType:"json",type:window.ZERO_DEBUG_MODE?"get":"post",data:d(a,r,t),success:function(e){return""===e.wid?(BH_UTILS.bhDialogDanger({title:"保存失败！",buttons:[{text:"确定",callback:function(){}}]}),!1):(n(a,r,e.wid),void BH_UTILS.bhDialogSuccess({title:"保存成功！",callback:function(){}}))}}))}})}),e("#exportBtn").click(function(){var i=window.ZERO_DEBUG_MODE?a.exportUrl.debug:a.exportUrl.normal;if(""!==i){var n=d(a,r,u());if(""===n.zdm)return void BH_UTILS.bhDialogDanger({title:"无法导出！",content:"别逗我，至少也要选择一个字段吧 (￢_￢)",buttons:[{text:"确定",callback:function(){}}]});if("dbf"===r){var o=f(n.zdmxsz.split(","));if(""!==o)return void BH_UTILS.bhDialogDanger({title:"无法导出！",content:"导出显示名不能有重复（"+o+"）",buttons:[{text:"确定",callback:function(){}}]})}n.zdmxsz=n.zdmxsz,n.progressKey=m();var s=n.zdm.split(",");if(s.length>256)return void BH_UTILS.bhDialogDanger({title:"无法导出！",content:"最多只能导出256列",buttons:[{text:"确定",callback:function(){}}]});e.ajax({url:i,dataType:"json",type:"post",data:n,success:function(e){e.logId!==t&&e.msg!==t&&(zeroModal.closeAll(),BH_UTILS.bhDialogDanger({title:"导出失败！",content:e.msg,buttons:[{text:"确定",callback:function(){}}]}))}}),zeroModal.close(w),zeroModal.progress(4,{getProgressUrl:(window.ZERO_DEBUG_MODE?a.getProgressUrl.debug:a.getProgressUrl.normal)+"?key="+n.progressKey,clearProgressUrl:""},2e3,function(t){if(t.by3&&"0"===t.by3)return void BH_UTILS.bhDialogDanger({title:"导出失败！",content:"导出出现异常，请联系管理员",buttons:[{text:"确定",callback:function(){}}]});var r=e('<form method="post" action="'+a.downloadExportFileUrl.normal+'"/>'),i=e('<input type="hidden" name="key" />');i.val(n.progressKey),r.append(i),e("body").append(r),r[0].submit()})}})}function s(t,a){e("#table_exporter").on("click",'[name="box_exporter"]',function(){var t=e(this)[0],r=e('[role-name="'+t.value+'"]');"dbf"===a&&r.attr("maxlength","10"),t.checked?(r.removeAttr("readOnly"),r.removeClass("readonly"),""===r.val()&&r.val("excel"===a?r.attr("role-display"):h(r.attr("role-name"),10))):(r.attr("readOnly","readOnly"),r.addClass("readonly"))}),e("#table_exporter").on("click",'[role-move="up"]',function(){var t=e(this).parents("tr");0!==t.index()&&t.prev().before(t)}),e("#table_exporter").on("click",'[role-move="down"]',function(){var t=e(this).parents("tr");t.index()!==x.items.length-1&&t.next().after(t)})}function l(a){_.setDatas(x.items),_.load();var r=e("#zeroExporterDcfaSelect").val(),i=document.getElementsByName("box_exporter"),n=e("#exportType").val();if(""===r){if(_.setDatas(x.items),_.load(),""!==a.defaultChoiceField)for(var o=a.defaultChoiceField.split(","),s=0;s<o.length;s++)e('[name="box_exporter"][value="'+o[s]+'"]').click();else e("#checkboxAll_exporter").click();e(".zero-exporter-text").each(function(){var t=e(this);t.val("excel"===n?t.attr("role-display"):h(t.attr("role-name"),10)),t.removeAttr("readOnly"),t.removeClass("readonly")})}else{for(var l=p(r),d=l.ZDM.split(","),u=[],s=0;s<d.length;s++)for(var f=0;f<x.items.length;f++)if(x.items[f].name===d[s]){u.push(x.items[f]);break}for(var f=0;f<x.items.length;f++)c(u,x.items[f])||u.push(x.items[f]);_.setDatas(u),_.load();for(var s=0;s<i.length;s++)c(d,i[s].value)&&(i[s].checked=!0);e(".zero-exporter-text").val(""),e(".zero-exporter-text").attr("readOnly","readOnly"),e(".zero-exporter-text").addClass("readonly");for(var m=l.ZDMXSZ.split(","),s=0;s<d.length;s++)if(m[s]!==t){var g=e('[role-name="'+d[s]+'"]');g.val(m[s]),g.removeAttr("readOnly"),g.removeClass("readonly")}}}function p(e){for(var t=0;t<x.dcfas.length;t++){var a=x.dcfas[t];if(a.WID===e)return a}}function c(e,t){for(var a=0;a<e.length;a++)if(e[a]===t)return!0;return!1}function d(a,r,i){var n={app:a.app,module:a.module,page:a.page,action:a.action,querySetting:a.querySetting,otherParam:a.otherParam,filename:a.filename,colnames:a.colnames,lx:r,dateFormat:a.dateFormat,supportForPagingLoadData:a.supportForPagingLoadData},o=a.queryParams;if(o!==t)for(var s in o)"pageSize"!==s&&"pageNumber"!==s&&(n[s]=o[s]);return i!==t?e.extend(n,i):n}function u(){for(var t="",a="",r=document.getElementsByName("box_exporter"),i=0;i<r.length;i++)r[i].checked&&(t+=r[i].value+",",a+=(e('[role-name="'+r[i].value+'"]').val()||"未命名"+i)+",");return""!==t&&(t=t.substring(0,t.length-1),a=a.substring(0,a.length-1)),{zdm:t,zdmxsz:a}}function h(e,t){return e.length<=t?e:e.substring(0,10)}function f(e){var t={};for(var a in e){if(t[e[a]])return e[a];t[e[a]]=!0}return""}function m(){for(var e=[],t="0123456789abcdef",a=0;a<36;a++)e[a]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="";var r=e.join("");return r}function g(e){return"string"==typeof e?e.toLowerCase():e}function v(e,a){a!==t&&null!==a||(a=new Date);var r={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in r)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?r[i]:("00"+r[i]).substr((""+r[i]).length)));return e}function y(t,a){e.ajax({url:t.getDataRoleIdUrl,dataType:"json",type:"post",data:{app:t.app},success:function(e){"function"==typeof a&&a(e.dataRoleId)}})}var b={},x={},w=t,_=t,z=window.location.href,k=z.indexOf("/sys/"),C=z.substring(0,k),D={module:"modules",filename:"data",exportTypes:["excel","dbf"],defaultChoiceField:"",supportForPagingLoadData:0,loadDataUrl:{debug:"http://localhost:3001/examples/json/zeroExporter-data1.json",normal:(window.WIS_CONFIG?C:"")+"/sys/jwpubapp/exportX/jwExport/getExportFields.do"},saveDcfaUrl:{debug:"http://localhost:3001/examples/json/zeroExporter-data2.json",normal:(window.WIS_CONFIG?C:"")+"/sys/jwpubapp/exportX/jwExport/saveDcfa.do"
},removeDcfaUrl:{debug:"http://localhost:3001/examples/json/zeroExporter-data2.json",normal:(window.WIS_CONFIG?C:"")+"/sys/jwpubapp/exportX/jwExport/removeDcfa.do"},exportUrl:{debug:"",normal:(window.WIS_CONFIG?C:"")+"/sys/jwpubapp/exportX/jwExport/export.do"},downloadExportFileUrl:{debug:"",normal:(window.WIS_CONFIG?C:"")+"/sys/jwpubapp/exportX/jwExport/downloadExportFile.do"},getProgressUrl:{debug:"",normal:(window.WIS_CONFIG?C:"")+"/sys/jwpubapp/exportX/jwExport/validateCanDownload.do"},clearProgressUrl:{debug:"",normal:""},getDataRoleIdUrl:(window.WIS_CONFIG?C:"")+"/sys/jwpubapp/exportX/jwExport/getDataRoleId.do"};return b.show=function(e){var t=a(e);r(t,["app","page","action"]),y(t,function(e){t.dataRoleId=e,1===t.exportTypes.length?n(t,t.exportTypes[0]):i(t)})},b}(jQuery)),function(e){"undefined"!=typeof module&&"object"==typeof exports&&define.cmd?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):window.zeroJqxGrid=e}(function(e,t){function a(){for(var e=[],t="0123456789abcdef",a=0;a<36;a++)e[a]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="",e.join("")}function r(e,a){for(var r in a)if(r===e)return a[r]!==t&&null!==a[r]?a[r]:"";return""}function i(e,a){var r=/(\\)?\{{([^\{\}\\]+)(\\)?\}}/g;return e.replace(r,function(e,r,i,n){if(r||n)return e.replace("\\","");var o,s,l=i.replace(/\s/g,"").split("."),p=a;for(o=0;o<l.length;o++)if(s=l[o],p=p[s],p===t||null===p)return"";return p})}function n(e,a,r){for(var i=[],n=(a-1)*r;n<a*r;n++)e[n]!==t&&i.push(e[n]);return i}function o(t,a){var r="";return t instanceof String||t instanceof Number||t instanceof Boolean?r+="&"+a+"="+encodeURIComponent(t):e.each(t,function(e){var i=null==a?e:a+(t instanceof Array?"["+e+"]":"."+e);r+="&"+o(this,i)}),r.substr(1)}function s(e){if(e instanceof Array){for(var t=[],a=0;a<e.length;++a)t[a]=s(e[a]);return t}if(e instanceof Object){var t={};for(var a in e)t[a]=s(e[a]);return t}return e}var l=function(e){this.params={container:".zerogrid-container",columns:[],url:"",pageIndex:1,pageSize:20,pagination:!0,paginationStyle:"full",checkboxProperty:t,checkboxPropertyFunc:t,checkboxPropertyTitle:t,checkboxCheckedFunc:t,radioboxProperty:t,radioboxPropertyFunc:t,tHeadTrAppendAttr:t,formId:"",loadBeforeListener:t,loadAfterListener:t,renderBeforeListener:t,renderAfterListener:t,unique:a(),datas:[],parseLoadDataFunc:t,loadDataAppendDataFunc:t,fontSize:t,titleFixed:!1,titleFixedDistance:0,titleFixedTop:"0px",defaultNotQuery:!1,customPageSizeList:[],customColumnTag:t,tempCustomColumns:[]},this.tempData={pageTotalSize:1,sortField:"",sortOrder:"",isloading:!1,datas:[]},this.init(e)};return l.prototype={init:function(t){e.extend(this.params,t),"undefined"!=typeof this.params.url&&""!==this.params.url||"undefined"!=typeof this.params.datas&&(this.tempData.datas=this.params.datas)},render:function(){var e=this;this.params.renderBeforeListener!==t&&this.params.renderBeforeListener(this.params),this.params.customColumnTag!==t?this.initTempCustomColumns(null,function(){e.renderTable(),e.params.renderAfterListener!==t&&e.params.renderAfterListener(e.params),e.params.defaultNotQuery||e.load(),e.params.customColumnTag!==t&&e.showCustomColumn()}):(this.params.tempCustomColumns=this.params.columns,this.renderTable(),this.params.renderAfterListener!==t&&this.params.renderAfterListener(this.params),this.params.defaultNotQuery||this.load(),this.params.customColumnTag!==t&&this.showCustomColumn())},reRender:function(t){var a=this;this.initTempCustomColumns(t,function(){e(a.params.container).html(""),a.renderTable(),a.load()})},renderTable:function(){var a='<div id="waitDiv_{{unique}}" class="ui_grid_loading"></div>';a+='   <table class="zero-grid zero-grid-hover bh-bColor-info-3" id="table_{{unique}}" table-unique="{{unique}}" {{#fontSize}}style="font-size:{{fontSize}}"{{/fontSize}}>',a+="       <thead><tr "+(this.params.tHeadTrAppendAttr!==t?this.params.tHeadTrAppendAttr:"")+">","undefined"==typeof this.params.checkboxProperty&&"undefined"==typeof this.params.radioboxProperty||(a+='       <th class="bh-bg-info-5 bh-bColor-info-3" style="text-align:center;padding-left:0;{{^checkboxPropertyTitle}}width:34px;{{/checkboxPropertyTitle}}">',a+="       {{#checkboxProperty}}",a+='           <div class="bh-checkbox" style="width:32px;padding-top:0"><label style="padding: 0 4px 0 10px"><input type="checkbox" id="checkboxAll_{{unique}}"><i class="bh-choice-helper"  style="position:static;margin-right:0;"></i></label></div>',a+="       {{/checkboxProperty}}",a+="       </th>"),a+="{{#tempCustomColumns}}",a+='   <th class="bh-bg-info-5 bh-bColor-info-3" {{#minwidth}}style="min-width:{{minwidth}}"{{/minwidth}} {{#width}}style="width:{{width}}"{{/width}} title="{{display}}">',a+='       {{#sort}} <a class="ui_grid_sort_default" role="sort" sort="{{sort}}">{{display}}</a> {{/sort}}',a+="       {{^sort}} {{display}} {{/sort}}",a+="   </th>",a+="{{/tempCustomColumns}}",a+="       </tr></thead>",a+='       <tbody id="tbody_{{unique}}" style="font-size:12px;"></tbody>',a+="   </table>",a+='   <div id="pagination_{{unique}}" class="zero-grid-pagination-d"></div>',e(this.params.container).html(Mustache.render(a,this.params)),this.bindTableEvent()},load:function(a,r){if(!this.loading){a!==t&&(this.params.pageIndex=a);var i=this;if(this.params.loadBeforeListener!==t){var s=this.params.loadBeforeListener();if(s!==t&&null!==s&&s===!1)return}if(this.loading=!0,this.openWaitDiv(),this.resetCheckboxStatus(),"undefined"!=typeof this.params.url&&""!==this.params.url){var l="";if("undefined"!=typeof this.params.formId&&(l+=e("#"+this.params.formId).serialize()),"function"==typeof this.params.loadDataAppendDataFunc){var p=this.params.loadDataAppendDataFunc();p!==t&&(l+="&"+o(p))}l+="&pageNumber="+this.params.pageIndex+"&pageSize="+this.params.pageSize,null!==this.tempData.sortField&&""!==this.tempData.sortField&&(l+="&*order="+("desc"===this.tempData.sortOrder?"-":encodeURIComponent("+"))+this.tempData.sortField),r!==t&&(l+="&"+_params),e.ajax({url:this.params.url+(this.params.url.indexOf("?")!==-1?"&":"?")+"_="+(new Date).getTime(),dataType:"json",data:l,type:window.ZERO_DEBUG_MODE===!0?"get":"post",error:function(){console.log("数据加载异常！请检查是否登录超时。")},success:function(e){var t=e;"undefined"!=typeof i.params.parseLoadDataFunc&&(t=i.params.parseLoadDataFunc(e)),t.pageIndex=parseInt(t.pageIndex),t.pageSize=parseInt(t.pageSize),t.total=parseInt(t.total),i.tempData.datas=t.datas,0===i.tempData.datas.length&&1!==i.params.pageIndex?(i.loading=!1,i.load(1,r)):i.renderData(t)}})}else{var c={total:this.tempData.datas.length,pageIndex:this.params.pageIndex,pageSize:this.params.pageSize,datas:this.params.pagination?n(this.tempData.datas,this.params.pageIndex,this.params.pageSize):this.tempData.datas};this.renderData(c)}}},renderData:function(a){var n="";if(a.datas.length>0)for(var o=0;o<a.datas.length;o++){n+="<tr>","undefined"!=typeof this.params.checkboxProperty?(n+='<td class="bh-bColor-info-3" style="text-align:center;padding-left:0">',("undefined"==typeof this.params.checkboxPropertyFunc||this.params.checkboxPropertyFunc(a.datas[o]))&&(n+='<div class="bh-checkbox" style="width:32px;padding-top:0"><label style="padding: 0 4px 0 10px">',n+='<input type="checkbox" name="box_'+this.params.unique+'" id="box_'+o+'" value="'+r(this.params.checkboxProperty,a.datas[o])+'"><i class="bh-choice-helper"  style="position:static;margin-right:0;"></i>',n+="</label></div>"),n+="</td>"):"undefined"!=typeof this.params.radioboxProperty&&(n+='<td class="bh-bColor-info-3" style="text-align:center;padding-left:0">',("undefined"==typeof this.params.radioboxPropertyFunc||this.params.radioboxPropertyFunc(a.datas[o]))&&(n+='<div class="bh-radio"><label style="padding: 0 8px 0 12px;">',n+='<input type="radio" id="rdo_'+o+'" name="box_'+this.params.unique+'" value="'+r(this.params.radioboxProperty,a.datas[o])+'">',n+='<i class="bh-choice-helper"  style="position:static;margin-right:0;"></i></label></div>'),n+="</td>");for(var l=0;l<this.params.tempCustomColumns.length;l++){var p=this.params.tempCustomColumns[l];n+="<td"+(p.append!==t?" "+p.append:""),n+=(this.params.fontSize!==t?' style="font-size:'+this.params.fontSize+'"':"")+' class="bh-bColor-info-3">';var c="";if(p.view!==t)if("function"==typeof p.view)c=p.view(a.datas[o],l);else{var d=s(a.datas[o]);d.index=o,c=i(p.view,d)}else c=r(p.property,a.datas[o]);n+=c+"</td>"}}else{var u=this.params.tempCustomColumns.length+(this.hasBox()?1:0);n+='<tr><td class="bh-bColor-info-3" style="text-align:center;" colspan="'+u+'">没有数据显示！</td></tr>'}if(e("#tbody_"+this.params.unique).html(n),this.params.pagination){if(this.tempData.pageTotalSize=Math.ceil(a.total/a.pageSize),isNaN(this.tempData.pageTotalSize))return;for(var h=[],f=5*Math.floor((a.pageIndex-1)/5),o=1;o<=5;o++){var m=f++ +1;m<=this.tempData.pageTotalSize&&h.push(m)}var g="<div>";g+='      <a class="zero-grid-pagination-a" title="Go最前页" role="goFirstPage" href="javascript:void(0)">««</a>',g+='      <a class="zero-grid-pagination-a" title="Go上一页" role="goPreviousPage" href="javascript:void(0)">«</a>';for(var o=0;o<h.length;o++){var v="bh-color-primary";h[o]==a.pageIndex&&(v="bh-bg-primary bh-color-primary-5 bh-bColor-primary"),g+='  <a class="zero-grid-pagination-a '+v+'" href="javascript:void(0)" role="goPageIndex" pageindex="'+h[o]+'" title="Go第'+h[o]+'页">'+h[o]+"</a>"}g+='      <a class="zero-grid-pagination-a" title="Go下一页" role="goNextPage" href="javascript:void(0)">»</a>',g+='      <a class="zero-grid-pagination-a" title="Go最后页" role="goLastPage" href="javascript:void(0)">»»</a>',"full"===this.params.paginationStyle?(g+='  <span class="zero-grid-pagination-des">共'+a.total+"条数据，分"+this.tempData.pageTotalSize+"页显示，",g+=this.buildPageSizeSelect()+"</span>"):"short"===this.params.paginationStyle&&(g+='  <span class="zero-grid-pagination-des">共'+a.total+"条数据。</span>"),e("#pagination_"+this.params.unique).html(g)}this.bindLoadEvent(),this.closeWaitDiv(),this.params.loadAfterListener!==t&&this.params.loadAfterListener(a),this.loading=!1},buildPageSizeSelect:function(){var e=this.params.pageSize,t='每页显示<select role="goPageSize" class="zero-grid-pagination-pz">';if(0===this.params.customPageSizeList.length)t+='<option value="6" '+(6==e?"selected=selected":"")+">6</option>",t+='<option value="10" '+(10==e?"selected=selected":"")+">10</option>",t+='<option value="20" '+(20==e?"selected=selected":"")+">20</option>",t+='<option value="30" '+(30==e?"selected=selected":"")+">30</option>",t+='<option value="40" '+(40==e?"selected=selected":"")+">40</option>",t+='<option value="50" '+(50==e?"selected=selected":"")+">50</option>",t+='<option value="100" '+(100==e?"selected=selected":"")+">100</option>";else for(var a=0;a<this.params.customPageSizeList.length;a++){var r=this.params.customPageSizeList[a];t+='<option value="'+r+'" '+(e==r?"selected=selected":"")+">"+r+"</option>"}return t+="</select>条数据。"},openWaitDiv:function(){var t=e("#waitDiv_"+this.params.unique),a=(e("#table_"+this.params.unique).position().left,e("#table_"+this.params.unique).position().top,e("#table_"+this.params.unique).width()),r=e("#table_"+this.params.unique).height();t.css({position:"absolute",width:a,height:r,display:"block"})},closeWaitDiv:function(){e("#waitDiv_"+this.params.unique).css({display:"none"})},bindTableEvent:function(){var a=this;e("#checkboxAll_"+this.params.unique).click(function(){for(var e=this.checked,r=document.getElementsByName("box_"+a.params.unique),i=0;i<r.length;i++)r[i].disabled||(r[i].checked=e);a.params.checkboxCheckedFunc!==t&&a.params.checkboxCheckedFunc()}),e("#table_"+this.params.unique).on("click","td",function(){}),this.params.titleFixed===!0&&e(window).scroll(function(r){var i=e("#table_"+a.params.unique);if(0!==i.length){var n=i.offset().top-e(window).scrollTop();if(n<=a.params.titleFixedDistance){if(document.getElementById("table_fixed_"+a.params.unique))return void e("#table_fixed_"+a.params.unique).show();var o={unique:a.params.unique,top:a.params.titleFixedTop,width:i.width()+"px",left:i.offset().left+"px",fontSize:a.params.fontSize!==t?a.params.fontSize:"12px"},s='  <table class="zero-grid zero-grid-hover" id="table_fixed_{{unique}}" style="position:fixed;z-index:1000;width:{{width}};top:{{top}};left:{{left}};text-align:center;font-size:{{fontSize}}">';s+=e("#table_"+a.params.unique+" thead").html(),s+="      </table>",e("body").append(Mustache.render(s,o)),a.params.checkboxProperty!==t&&e("#table_fixed_"+a.params.unique).find('[class="bh-checkbox"]').remove()}else e("#table_fixed_"+a.params.unique).hide()}})},bindLoadEvent:function(){var a=this,r=e(this.params.container);r.find("a[role='goFirstPage']").click(function(){0!==a.tempData.pageTotalSize&&(a.params.pageIndex=1,a.load())}),r.find("a[role='goPreviousPage']").click(function(){if(0!==a.tempData.pageTotalSize){var e=a.params.pageIndex-1;e<=0&&(e=1),a.params.pageIndex=e,a.load()}}),r.find("a[role='goNextPage']").click(function(){if(0!==a.tempData.pageTotalSize){var e=a.params.pageIndex+1;e>a.tempData.pageTotalSize&&(e=a.tempData.pageTotalSize),a.params.pageIndex=e,a.load()}}),r.find("a[role='goLastPage']").click(function(){0!==a.tempData.pageTotalSize&&(a.params.pageIndex=a.tempData.pageTotalSize,a.load())}),r.find("a[role='goPageIndex']").click(function(){0!==a.tempData.pageTotalSize&&(a.params.pageIndex=parseInt(e(this).attr("pageindex")),a.load())}),r.find("select[role='goPageSize']").change(function(){a.params.pageSize=parseInt(this.value),a.params.pageIndex=1,a.load()}),r.find("a[role='sort']").unbind("click"),r.find("a[role='sort']").click(function(){a.resetSortClass();var r=e(this).attr("sort");e(this).removeClass(),a.tempData.sortField===r?a.tempData.sortOrder===t||""===a.tempData.sortOrder?(a.tempData.sortOrder="asc",e(this).addClass("ui_grid_sort_asc")):"asc"===a.tempData.sortOrder?(a.tempData.sortOrder="desc",e(this).addClass("ui_grid_sort_desc")):(a.tempData.sortOrder="asc",e(this).addClass("ui_grid_sort_asc")):(a.tempData.sortOrder="asc",e(this).addClass("ui_grid_sort_asc")),a.tempData.sortField=r,a.params.pageIndex=1,a.load()})},resetCheckboxStatus:function(){e("#checkboxAll_"+this.params.unique).attr("checked",!1)},hasBox:function(){return this.params.checkboxProperty!==t||this.params.radioboxProperty!==t},resetSortClass:function(){e("#table_"+this.params.unique).find("a[role='sort']").each(function(t){e(this).removeClass(),e(this).addClass("ui_grid_sort_default")})},getSelectedVal:function(){for(var e="",t=document.getElementsByName("box_"+this.params.unique),a=0;a<t.length;a++){var r=t[a];r.checked&&(""!==e&&(e+=","),e+=r.value)}return e},getDatas:function(){return this.tempData.datas},setDatas:function(e){this.datas=e,this.tempData.datas=e},getDatasByProperty:function(e,t){for(var a=[],i=e.split(","),n=0;n<i.length;n++)for(var o=0;o<this.tempData.datas.length;o++){var s=r(t,this.tempData.datas[o]);if(s===i[n]){a.push(this.tempData.datas[o]);break}}return a},loadUserSchema:function(t){var a=this;e.ajax({url:WIS_EMAP_SERV.getContextPath()+"/sys/gglglyy/us/queryUserSchema.do",dataType:"json",data:{app:WIS_CONFIG.APPNAME,pageFlag:a.params.container+","+a.params.customColumnTag},type:"post",success:function(e){var a=[],r=e.schemaList;if(r.length>0){var i=(r[0].CONTENT||"").split(",");i.length>0&&(a=i)}t(a)}})},initTempCustomColumns:function(e,t){var a=this;e?(this.buildTempCustomColumns(e),t()):this.loadUserSchema(function(e){a.buildTempCustomColumns(e),t()})},buildTempCustomColumns:function(e){if(0===e.length)this.params.tempCustomColumns=this.params.columns;else{for(var t=[],a=0;a<e.length;a++)for(var r=0;r<this.params.columns.length;r++)this.params.columns[r].property===e[a]&&t.push(this.params.columns[r]);this.params.tempCustomColumns=t}},showCustomColumn:function(){var a=this,r=e(this.params.customColumnTag);0!==r.length&&r.click(function(){zeroModal.show({title:"显示/隐藏字段",content:'<div id="showOrHideColumnModal"></div>',width:"70%",height:"70%",cancel:!0,ok:!0,okTitle:"保存",okFn:function(){var t=[];return e('#showOrHideColumnModal [type="checkbox"]').each(function(){var a=e(this);a.is(":checked")&&t.push(a.attr("name"))}),0===t.length?(ggf_alert("至少要选择一个字段！"),!1):void e.ajax({url:WIS_EMAP_SERV.getContextPath()+"/sys/gglglyy/us/saveUserSchema.do",dataType:"json",data:{app:WIS_CONFIG.APPNAME,pageFlag:a.params.container+","+a.params.customColumnTag,content:t.join(",")},type:"post",success:function(e){a.reRender(t)}})}});for(var r=[],i=0;i<a.params.columns.length;i++)a.params.columns[i].display!==t&&a.params.columns[i].property!==t&&r.push(a.params.columns[i]);var n=Math.ceil(r.length/5),o='<div style="margin: 2px 0 6px -3px;">';o+='       <input type="button" role="全选" class="bh-btn bh-btn-default bh-btn-small" value="全选"/>',o+='       <input type="button" role="全不选" class="bh-btn bh-btn-default bh-btn-small" value="全不选"/>',o+="   </div>",o+='<div class="bh-customize-column-grid bh-bColor-info-3">',o+='       <ul class="bh-clearfix" style="list-style:none">';for(var i=1;i<=n;i++)for(var s=1;s<=5;s++){var l=r[5*(i-1)+s-1];l!==t?(o+='<li class="cell bh-bColor-info-3" style="width:20%;">',o+='   <div class="bh-checkbox bh-str-cut"><label><input type="checkbox" name="'+l.property+'"><i class="bh-choice-helper"></i><span class="filed-name">'+l.display+"</span></label></div>",o+="</li>"):o+='<li class="cell bh-bColor-info-3" style="width:20%;"></li>'}o+="       </ul>",o+="   </div>",e("#showOrHideColumnModal").html(o),a.loadUserSchema(function(t){0===t.length?e('#showOrHideColumnModal [type="checkbox"]').each(function(){e(this).prop("checked",!0)}):e('#showOrHideColumnModal [type="checkbox"]').each(function(){for(var a=e(this),r=0;r<t.length;r++)if(a.attr("name")===t[r]){a.prop("checked",!0);break}})}),e('#showOrHideColumnModal [role="全选"]').click(function(){e('#showOrHideColumnModal [type="checkbox"]').each(function(){var t=e(this);t.prop("checked",!0)})}),e('#showOrHideColumnModal [role="全不选"]').click(function(){e('#showOrHideColumnModal [type="checkbox"]').each(function(){var t=e(this);t.prop("checked",!1)})})})}},l}(jQuery)),function(e){"undefined"!=typeof module&&"object"==typeof exports&&define.cmd?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):window.zeroMultipleDropDownList=e}(function(e,t){function a(){for(var e=[],t="0123456789abcdef",a=0;a<36;a++)e[a]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="",e.join("")}function r(){var e=navigator.userAgent,t=e.indexOf("Opera")>-1,a=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1&&!t,r=e.indexOf("Edge")>-1,i=e.indexOf("Trident")>-1&&e.indexOf("rv:11.0")>-1,n=e.indexOf("Firefox")>-1,o=e.indexOf("Safari")>-1&&e.indexOf("Chrome")==-1,s=e.indexOf("Chrome")>-1&&e.indexOf("Safari")>-1;if(a){var l=new RegExp("MSIE (\\d+\\.\\d+);");l.test(e);var p=parseFloat(RegExp.$1);return 7==p?"IE7":8==p?"IE8":9==p?"IE9":10==p?"IE10":11==p?"IE11":"0"}return n?"FF":t?"Opera":i?"IE11":o?"Safari":r?"Edge":s?"Chrome":""}var i=function(e){this.params={container:"",unique:a(),url:t,postParamFunc:t,parseResultsFunc:t,initValue:t,initValueParamFunc:t,initValueNotFindDataIsTrigerSelectedEvent:!0,viewFunc:function(){return""},resultParmaryKey:t,selectedFunc:t,width:t,height:t,right:t,showIcon:!0,iconTop:t,placeholder:"输入关键字查找",readOnly:!1,pageNumber:1,getPageInfoFunc:t},this.originResult={},this.tempResults=[],this.tempLoading=!1,this.tempTotalPageSize=0,this.choicedDatas=[],this.init(e)},n=r();return i.prototype={init:function(a){e.extend(this.params,a);var r=e(this.params.container),i=this.params.iconTop!==t?this.params.iconTop:"3px";this.params.showIcon&&(r.parent().append('<div id="icon_'+this.params.unique+'" style="border:none; right:3px; top:'+i+'; position:absolute; width:6.14887%; height:26px; background-color: transparent;"><div unselectable="on" class="jqx-icon-arrow-down jqx-icon"></div></div>'),r.parent().find(".bh-table-form-icon").hide()),r.attr("readonly","readonly").attr("zero-isshow","0").addClass("zero-ddl"),this.params.readOnly&&r.css("cursor","not-allowed"),this.bindEvent(),this.params.initValue!==t&&""!==this.params.initValue&&this.initValueFunc()},initValueFunc:function(){var a=this,r={WID:this.params.initValue};if("function"==typeof this.params.initValueParamFunc){var i=this.params.initValueParamFunc(this.params.initValue);i!==t&&(r=i)}e.ajax({url:this.params.url,data:r,dataType:"json",type:"post",success:function(e){var t=e;if("function"==typeof a.params.parseResultsFunc&&(t=a.params.parseResultsFunc(e)),t.length>0){for(var r=0;r<t.length;r++)a.choicedDatas.push(t[r]);a.params.selectedFunc(a.choicedDatas)}else a.params.initValueNotFindDataIsTrigerSelectedEvent&&a.params.selectedFunc("")}})},bindEvent:function(){var t=this;e(this.params.container).click(function(){t.params.readOnly||t.openOrCloseContainer.call(t)}),e("#icon_"+this.params.unique).click(function(){})},openOrCloseContainer:function(){var a=this,r=e(this.params.container),i=r.attr("zero-isshow");if("1"===i)e("#keyword_"+a.params.unique).animate({height:"0px"}),setTimeout(function(){e("#keyword_"+a.params.unique).remove()},300),r.attr("zero-isshow","0");else{var o=r.width()+26+"px";a.params.width!==t&&(o="function"==typeof a.params.width?a.params.width():a.params.width);var s=a.params.placeholder!==t?a.params.placeholder:"",l="width:"+o+";";a.params.right!==t&&""!==a.params.right&&(l+="right:"+a.params.right+";");var p='<div id="keyword_'+a.params.unique+'" class="zero-ddl-container" style="'+l+'">';p+='      <input id="keyword_input_'+a.params.unique+'" placeholder="'+s+'" class="jqx-widget jqx-listbox-filter-input jqx-input jqx-rc-all zero-ddl-keyword" />',p+='      <div id="zero_content_'+a.params.unique+'" style="margin-top:26px">',p+="      </div>",p+="   </div>",r.after(p),e("#keyword_"+a.params.unique).animate({height:a.params.height!==t?a.params.height:"200px",scrollTop:" 0"}),n.indexOf("IE")===-1?e("#keyword_input_"+a.params.unique).focus():WIS_EMAP_INPUT.placeHolder("#keyword_input_"+a.params.unique),r.attr("zero-isshow","1"),a.loadDatas(),a.bindLoadDatasAfterEvent(),"Edge"===n?e("#keyword_input_"+a.params.unique).bind("input",function(){a.params.pageNumber=1,a.loadDatas()}):e("#keyword_input_"+a.params.unique).keyup(function(){a.params.pageNumber=1,a.loadDatas()})}},bindLoadDatasAfterEvent:function(){var t=this;e(this.params.container);e("#keyword_"+t.params.unique).on("click",'a[role="pageUp"]',function(e){t.params.pageNumber>1&&(t.params.pageNumber--,t.loadDatas()),e.stopPropagation(),e.preventDefault()}),e("#keyword_"+t.params.unique).on("click",'a[role="pageDown"]',function(e){t.params.pageNumber+1<=t.tempTotalPageSize&&(t.params.pageNumber++,t.loadDatas()),e.stopPropagation(),e.preventDefault()})},loadDatas:function(){var a=this,r=e("#keyword_input_"+this.params.unique).val()||"",i=e.extend({pageSize:10,pageNumber:a.params.pageNumber},this.params.postParamFunc!==t?this.params.postParamFunc(r):{});this.tempLoading||(this.tempLoading=!0,e("#zero_content_"+this.params.unique).html('<div style="padding-left: 4px; color: #bbb;">Loading...</div>'),e.ajax({url:this.params.url,data:i,dataType:"json",type:"post",success:function(e){a.tempLoading=!1;var t=e;return"function"==typeof a.params.parseResultsFunc&&(t=a.params.parseResultsFunc(e)),0===t.length&&1!==a.params.pageNumber?(a.params.pageNumber=1,void a.loadDatas()):(a.originResult=e,a.tempResults=t,void a.renderItems(r))}}))},renderItems:function(a){var r=this,i="";if(0===this.tempResults.length)i+='<div style="padding-left: 4px; color: #bbb;">没有数据显示！</div>';else{i+='<div class="zero-ddl-multiple" style="height:24px;line-height:24px;padding-left:4px;padding-right:4px;">当前已选择<span id="zm-choiced-span-'+this.params.unique+'" class="bh-color-warning" style="font-size:16px;font-weight:bold;margin:0 2px;">'+this.choicedDatas.length+'</span>条数据。<a id="zm-clear-'+this.params.unique+'" href="javascript:void(0);">清除选择</a></div>';for(var n=0;n<this.tempResults.length;n++){var o=this.params.viewFunc(this.tempResults[n]),s=o;a!==t&&""!==a&&(s=s.replace(new RegExp(a,"gm"),'<font color="red">'+a+"</font>"));for(var l=!1,p=0;p<this.choicedDatas.length;p++)if(this.choicedDatas[p][this.params.resultParmaryKey]==this.tempResults[n][this.params.resultParmaryKey]){l=!0;break}i+='<div class="zero-ddl-item zero-ddl-multiple '+(l?"bh-bg-warning-3":"")+'" role="zero-ddl-item" role-val="'+this.tempResults[n][this.params.resultParmaryKey]+'">'+s+"</div>"}if("function"==typeof this.params.getPageInfoFunc){var c=this.params.getPageInfoFunc(this.originResult);this.tempTotalPageSize=Math.ceil(c.totalSize/c.pageSize),i+='<div style="float:right;padding-right:8px;">',i+='  <span class="bh-color-grey-2">共'+c.totalSize+"条数据&nbsp;"+this.params.pageNumber+"/"+this.tempTotalPageSize+"</span>",i+='  <a role="pageUp" href="javascript:void(0);">上页</a>&nbsp;',i+='  <a role="pageDown" href="javascript:void(0);">下页</a>',i+="</div>"}}e("#zero_content_"+this.params.unique).html(i),e('[role="zero-ddl-item"]').click(function(t){var a=e(this),i=a.attr("role-val");a.toggleClass("bh-bg-warning-3");for(var n=0;n<r.tempResults.length;n++)if(r.tempResults[n][r.params.resultParmaryKey]==i){r.doChoicedDatas(r.tempResults[n]);break}t.stopPropagation()}),e("#zm-clear-"+this.params.unique).click(function(e){r.choicedDatas=[],"function"==typeof r.params.selectedFunc&&r.params.selectedFunc(r.choicedDatas)})},doChoicedDatas:function(t){for(var a=-1,r=0;r<this.choicedDatas.length;r++)this.choicedDatas[r][this.params.resultParmaryKey]==t[this.params.resultParmaryKey]&&(a=r);a===-1?this.choicedDatas.push(t):this.choicedDatas.splice(a,1),e("#zm-choiced-span-"+this.params.unique).html(this.choicedDatas.length),"function"==typeof this.params.selectedFunc&&this.params.selectedFunc(this.choicedDatas)}},e(document).on("click",function(t){var a=e(t.target);a.hasClass("zero-ddl")||a.hasClass("zero-ddl-keyword")||a.hasClass("zero-ddl-multiple")||(e(".zero-ddl-container").remove(),e(".zero-ddl").attr("zero-isshow","0"))}),i}(jQuery));